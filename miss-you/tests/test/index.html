<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SON_V19_HACKER_LOVE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Black+Ops+One&family=Dancing+Script:wght@700&display=swap');
        
        body { margin: 0; overflow: hidden; background-color: #000; font-family: 'Share Tech Mono', monospace; }
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 2; } /* Canvas drone n·∫±m tr√™n n·ªÅn */

        /* BG & Sticker Layer */
        #bg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #ff69b4 0%, #4b0082 100%);
            z-index: 0; overflow: hidden;
        }
        .sticker-cat {
            position: absolute; bottom: 10px; width: 80px; height: auto; z-index: 1;
            animation: bounce 1s infinite alternate;
        }
        #cat-left { left: 10px; } #cat-right { right: 10px; transform: scaleX(-1); } /* M√®o ph·∫£i quay ƒë·∫ßu */
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }
        #cat-right.bounce { animation: bounceRight 1s infinite alternate; }
        @keyframes bounceRight { from { transform: scaleX(-1) translateY(0); } to { transform: scaleX(-1) translateY(-10px); } }

        /* Canvas cho tr√°i tim n·ªÅn */
        #heart-canvas { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }

        /* UI */
        #ui-layer {
            position: absolute; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; z-index: 999; pointer-events: none;
        }
        .cyber-btn {
            pointer-events: auto; background: #000; color: #FF69B4; border: 2px solid #FF69B4;
            padding: 20px 45px; font-size: 22px; cursor: pointer; 
            font-family: 'Black Ops One', cursive; letter-spacing: 2px;
            box-shadow: 0 0 15px #FF69B4; transition: 0.3s; animation: pulse 2s infinite;
        }
        .cyber-btn:hover { background: #FF69B4; color: #000; box-shadow: 0 0 40px #FF69B4; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* Cube Countdown */
        #cube-container { display: none; perspective: 800px; width: 150px; height: 150px; margin-bottom: 20px;}
        #cube { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; animation: spin 4s infinite linear; }
        .face {
            position: absolute; width: 146px; height: 146px;
            border: 2px solid #FF69B4; background: rgba(255, 105, 180, 0.1);
            color: #FF69B4; font-size: 80px; display: flex;
            justify-content: center; align-items: center;
            font-family: 'Black Ops One'; text-shadow: 0 0 10px #FF69B4;
        }
        .front { transform: translateZ(75px); } .back { transform: rotateY(180deg) translateZ(75px); }
        .right { transform: rotateY(90deg) translateZ(75px); } .left { transform: rotateY(-90deg) translateZ(75px); }
        .top { transform: rotateX(90deg) translateZ(75px); } .bottom { transform: rotateX(-90deg) translateZ(75px); }
        @keyframes spin { from { transform: rotateX(0) rotateY(0); } to { transform: rotateX(360deg) rotateY(360deg); } }

        /* VIRUS & GLITCH */
        .glitch-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: transparent; z-index: 2000; display: none;
            pointer-events: none; mix-blend-mode: hard-light;
        }
        #virus-terminal {
            position: absolute; top: 10%; left: 5%; width: 90%; height: 80%;
            color: #FF69B4; font-family: 'Share Tech Mono'; font-size: 16px;
            z-index: 2001; display: none; text-shadow: 0 0 5px #FF69B4;
            overflow: hidden; background: rgba(50, 0, 20, 0.8); padding: 20px;
            border: 2px solid #FF69B4;
        }

        /* Message */
        #msg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); display: none; z-index: 3000;
            flex-direction: column; justify-content: center; align-items: center;
            padding: 20px; box-sizing: border-box;
        }
        #msg-content {
            color: #FF69B4; font-size: 16px; line-height: 1.6; font-family: 'Share Tech Mono';
            white-space: pre-wrap; max-width: 650px; text-shadow: 0 0 10px #FF69B4;
            border-left: 4px solid #FF69B4; padding-left: 20px; background: rgba(50, 0, 20, 0.5);
        }
        #skip-btn { margin-top: 30px; padding: 12px 30px; border: 1px solid #FFD700; background: transparent; color: #FFD700; display: none; pointer-events: auto; font-weight: bold; cursor: pointer; transition: 0.3s; }
        #skip-btn:hover { background: #FFD700; color: #000; }

    </style>
</head>
<body>
    <div id="bg-layer">
        <img id="cat-left" class="sticker-cat" src="https://media.tenor.com/images/8235199657866805778/tenor.gif" alt="cat">
        <img id="cat-right" class="sticker-cat bounce" src="https://media.tenor.com/images/8235199657866805778/tenor.gif" alt="cat">
    </div>
    <canvas id="heart-canvas"></canvas>
    
    <canvas id="c"></canvas>
    <div id="glitch-div" class="glitch-layer"></div>
    <div id="virus-terminal"></div>
    
    <div id="ui-layer">
        <button id="btn-start" class="cyber-btn">START LOVE HACK</button>
        <div id="cube-container">
            <div id="cube">
                <div class="face front">10</div><div class="face back">10</div>
                <div class="face right">10</div><div class="face left">10</div>
                <div class="face top">10</div><div class="face bottom">10</div>
            </div>
        </div>
    </div>

    <div id="msg-layer">
        <div style="color: #FFD700; font-size: 20px; margin-bottom: 20px;">üíå SECRET MESSAGE DECRYPTED</div>
        <div id="msg-content"></div>
        <button id="skip-btn" onclick="startFinale()">TI·∫æP T·ª§C B·ªÆA TI·ªÜC >></button>
    </div>

    <audio id="audio" src="https://nguyenbacson.io.vn/miss-you-happy-birthday.mp3" loop></audio>

<script>
    // --- N·ªòI DUNG T√ÇM TH∆Ø ---
    const LETTER = `D∆∞∆°ng ∆°i, h√¥m nay 01/03/2026, c·∫≠u tr√≤n 19 tu·ªïi.

T·ªõ ch√∫c c·∫≠u ng√†y c√†ng xinh ƒë·∫πp, h·ªçc gi·ªèi, ƒë·∫°t ƒë∆∞·ª£c k·∫øt qu·∫£ cao v√† s·ªõm th·ª±c hi·ªán ƒë∆∞·ª£c m·ªçi ∆∞·ªõc m∆°.

T·ªõ xin l·ªói v√¨ th·ªùi gian qua ƒë√£ l√†m c·∫≠u bu·ªìn. NƒÉm m·ªõi mong c·∫≠u b·ªè qua cho t√≠nh c√°ch "tr·∫ª tr√¢u" c·ªßa t·ªõ nh√©.

Happy Birthday! ‚ù§Ô∏è

-- Nguy·ªÖn B·∫Øc S∆°n --`;

    // --- K·ªäCH B·∫¢N DRONE (V18) ---
    const SCRIPT = [
        { t: "G·ª¨I ƒê·∫æN\nTR∆Ø∆†NG TH·ªä D∆Ø∆†NG", c: "#FF69B4" }, // H·ªìng
        { t: "CH√öC M·ª™NG\nNƒÇM M·ªöI 2026", c: "#FFD700" }, // V√†ng
        { t: "XU√ÇN B√çNH NG·ªå\nM√É ƒê√ÅO TH√ÄNH C√îNG üê¥", c: "#00FFFF" }, // Cyan
        { t: "HAPPY VALENTINE\n14/02 NG·ªåT NG√ÄO", c: "#FF1493" }, // H·ªìng ƒë·∫≠m
        { t: "QU·ªêC T·∫æ PH·ª§ N·ªÆ\n8/3 XINH ƒê·∫∏P", c: "#FFF" }, // Tr·∫Øng
        { action: "VIRUS" }, 
        { t: "HACKED BY SON\nCH·∫æ ƒê·ªò Y√äU TH∆Ø∆†NG", c: "#FF69B4" }, // H·ªìng
        { t: "HAPPY BIRTHDAY\nSINH NH·∫¨T VUI V·∫∫", c: "#FFD700" }, // V√†ng
        { t: "TU·ªîI 19\nR·ª∞C R·ª† T·ªéA S√ÅNG", c: "#FF1493" }, // H·ªìng ƒë·∫≠m
        { action: "MSG" } 
    ];

    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    const hCanvas = document.getElementById('heart-canvas');
    const hCtx = hCanvas.getContext('2d');
    const isMobile = window.innerWidth < 768;
    let w, h;

    // C·∫§U H√åNH DRONE (NEON)
    const DOT_GAP = isMobile ? 4 : 3; 
    const DOT_SIZE = isMobile ? 3 : 2.5; 

    let state = "IDLE"; 
    let drones = [];
    let fireworks = [], particles = [], bgHearts = [];
    let scriptIdx = 0;
    let countdown = 10;
    
    // Matrix Config (H·ªìng/T√≠m)
    const M_CHARS = "‚ù§‚ô•‚ô°‚ù•‚ù£"; 
    let m_cols = [];
    let matrixColor = "#FF69B4"; 

    // Glitch Config
    let glitchInterval = null;

    function resize() {
        w = canvas.width = hCanvas.width = window.innerWidth;
        h = canvas.height = hCanvas.height = window.innerHeight;
        m_cols = Array(Math.floor(w/20)).fill(0);
    }
    window.addEventListener('resize', resize);
    resize();

    // --- START ---
    document.getElementById('btn-start').onclick = function() {
        this.style.display = 'none';
        document.getElementById('audio').play().catch(()=>{});
        runCountdown();
        // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng m√®o b·∫Øn tim n·ªÅn
        setInterval(spawnBgHeart, 300);
    };

    // --- 1. COUNTDOWN ---
    function runCountdown() {
        state = "COUNTDOWN";
        document.getElementById('cube-container').style.display = 'block';
        const faces = document.querySelectorAll('.face');
        let tmr = setInterval(() => {
            countdown--;
            faces.forEach(f => f.innerText = countdown);
            if(countdown <= 0) {
                clearInterval(tmr);
                document.getElementById('cube-container').style.display = 'none';
                runShow(); 
            }
        }, 1000);
    }

    // --- 2. SHOW CONTROL ---
    function runShow() {
        state = "SHOW";
        nextScene();
    }

    function nextScene() {
        if(scriptIdx >= SCRIPT.length) return;
        let s = SCRIPT[scriptIdx++];
        if(s.action === "VIRUS") { runVirusEffect(); return; }
        if(s.action === "MSG") { setTimeout(runMessage, 1500); return; }
        formText(s.t, s.c);
        setTimeout(nextScene, 9000); 
    }

    // --- 3. VIRUS EFFECT (Hacker T√¨nh Y√™u) ---
    function runVirusEffect() {
        state = "VIRUS";
        const term = document.getElementById('virus-terminal');
        const glitchDiv = document.getElementById('glitch-div');
        term.style.display = 'block';
        glitchDiv.style.display = 'block';
        matrixColor = "#FF1493"; // H·ªìng ƒë·∫≠m

        let logs = "";
        let logInterval = setInterval(() => {
            logs += `> INITIATING LOVE PROTOCOL...\n`;
            logs += `> HACKING HEART... SUCCESS!\n`;
            logs += `> SENDING VIRTUAL HUGS & KISSES...\n`;
            term.innerText = logs;
            term.scrollTop = term.scrollHeight;
        }, 80);

        let shakeTime = 0;
        let shakeInterval = setInterval(() => {
            shakeTime++;
            let dx = (Math.random()-0.5) * 15;
            let dy = (Math.random()-0.5) * 15;
            canvas.style.transform = `translate(${dx}px, ${dy}px)`;
            drones.forEach(d => d.c = Math.random()>0.5 ? "#FF69B4" : "#FFF");
            if(shakeTime > 50) { 
                 clearInterval(shakeInterval); clearInterval(logInterval);
                 term.style.display = 'none'; glitchDiv.style.display = 'none';
                 canvas.style.transform = "none";
                 matrixColor = "#FF69B4"; 
                 nextScene(); 
            }
        }, 50);
    }

    // --- 4. MESSAGE ---
    function runMessage() {
        state = "MSG";
        const layer = document.getElementById('msg-layer');
        const content = document.getElementById('msg-content');
        const btn = document.getElementById('skip-btn');
        layer.style.display = 'flex';
        
        drones.forEach(d => {
            d.tx = Math.random() * w; d.ty = Math.random() * h;
            d.c = "rgba(255, 105, 180, 0.3)";
        });

        let i = 0;
        let tmr = setInterval(() => {
            content.innerText = LETTER.substring(0, i) + "_";
            i++;
            if(i > LETTER.length) {
                clearInterval(tmr);
                content.innerText = LETTER;
                btn.style.display = 'block';
                setTimeout(() => { if(state==="MSG") startFinale(); }, 15000);
            }
        }, 40);
    }

    window.startFinale = function() {
        document.getElementById('msg-layer').style.display = 'none';
        state = "FINALE";
        formCake();
        setInterval(() => { if(Math.random()>0.3) launchHeartFirework(); }, 400);
    };

    // --- LOGIC: TEXT TO DRONES ---
    function formText(txt, color) {
        const lines = txt.split('\n');
        const tmp = document.createElement('canvas');
        const tCtx = tmp.getContext('2d');
        let fSize = isMobile ? 80 : 140;
        tCtx.font = `900 ${fSize}px "Arial Black"`;
        let maxW = 0;
        lines.forEach(l => { let m = tCtx.measureText(l); if(m.width > maxW) maxW = m.width; });
        tmp.width = maxW + 20; tmp.height = lines.length * fSize * 1.3;
        tCtx.font = `900 ${fSize}px "Arial Black"`;
        tCtx.fillStyle = '#fff'; tCtx.textAlign = 'center'; tCtx.textBaseline = 'middle';
        lines.forEach((l, i) => { tCtx.fillText(l, tmp.width/2, fSize*0.8 + i*fSize); });
        getPoints(tmp, color);
    }

    function formCake() {
        const tmp = document.createElement('canvas');
        const tCtx = tmp.getContext('2d');
        let s = Math.min(w, h) * 0.8;
        tmp.width = tmp.height = s;
        tCtx.font = `${s/2}px serif`;
        tCtx.textAlign = 'center'; tCtx.textBaseline = 'middle';
        tCtx.fillStyle = '#fff'; tCtx.fillText("üéÇ", s/2, s/2);
        getPoints(tmp, "#FFD700");
    }

    function getPoints(tmp, color) {
        const data = tmp.getContext('2d').getImageData(0,0, tmp.width, tmp.height).data;
        let points = [];
        let scale = Math.min(w*0.9/tmp.width, h*0.65/tmp.height);
        let sx = (w - tmp.width*scale)/2; let sy = (h - tmp.height*scale)/2;
        for(let y=0; y<tmp.height; y+=DOT_GAP) {
            for(let x=0; x<tmp.width; x+=DOT_GAP) {
                if(data[(y*tmp.width + x)*4 + 3] > 128) {
                    points.push({x: sx + x*scale, y: sy + y*scale});
                }
            }
        }
        if(points.length > 4000) { points.sort(() => Math.random() - 0.5); points = points.slice(0, 4000); }
        updateDrones(points, color);
    }

    function updateDrones(pts, color) {
        pts.sort(() => Math.random() - 0.5);
        if(drones.length < pts.length) {
            let add = pts.length - drones.length;
            for(let i=0; i<add; i++) {
                drones.push({ x: Math.random()*w, y: Math.random()*h, tx: w/2, ty: h/2, c: color });
            }
        }
        drones.forEach((d, i) => {
            if(i < pts.length) { d.tx = pts[i].x; d.ty = pts[i].y; d.c = color; }
            else { d.tx = Math.random()*w; d.ty = -100; d.c = "transparent"; }
        });
    }

    // --- EFFECTS ---
    function spawnBgHeart() {
        // Tim b·∫Øn t·ª´ 2 con m√®o
        let startX = Math.random() > 0.5 ? 50 : w - 50;
        bgHearts.push({
            x: startX + (Math.random()-0.5)*30, y: h - 50,
            vx: (w/2 - startX) * 0.005 + (Math.random()-0.5)*2, // Bay h∆∞·ªõng v√†o gi·ªØa
            vy: -Math.random()*5 - 3,
            sz: Math.random()*15 + 10,
            rot: Math.random()*360, vRot: (Math.random()-0.5)*10
        });
    }

    function launchHeartFirework() {
        let x = Math.random() * w; let y = h;
        let targetY = h * 0.2 + Math.random() * h * 0.3;
        let color = `hsl(${Math.random()*60 + 300}, 100%, 60%)`;
        fireworks.push({x: x, y: y, tx: x, ty: targetY, vy: -12, c: color});
    }

    function explodeHeart(fw) {
        for(let i=0; i<40; i++) {
            let t = (i/40) * Math.PI * 2;
            let dx = 16 * Math.pow(Math.sin(t), 3);
            let dy = -(13 * Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t));
            let s = Math.random() * 0.1 + 0.05; 
            particles.push({x: fw.x, y: fw.y, vx: dx * s, vy: dy * s, c: fw.c, l: 1.5, g: 0.05});
        }
    }

    // --- LOOP ---
    function loop() {
        requestAnimationFrame(loop);
        
        // X√≥a canvas drone (ƒë·ªÉ l·∫°i v·ªát m·ªù)
        ctx.fillStyle = "rgba(0,0,0,0.1)"; ctx.fillRect(0,0,w,h);
        
        // X√≥a canvas n·ªÅn (tim bay)
        hCtx.clearRect(0,0,w,h);

        // 1. BG Hearts (M√®o b·∫Øn tim)
        hCtx.fillStyle = "#FF69B4";
        for(let i=bgHearts.length-1; i>=0; i--) {
            let bh = bgHearts[i];
            bh.x += bh.vx; bh.y += bh.vy; bh.rot += bh.vRot;
            hCtx.save();
            hCtx.translate(bh.x, bh.y); hCtx.rotate(bh.rot * Math.PI/180);
            hCtx.font = `${bh.sz}px Arial`; hCtx.fillText("‚ù§Ô∏è", 0, 0);
            hCtx.restore();
            if(bh.y < -50) bgHearts.splice(i, 1);
        }

        // 2. Matrix (V·∫Ω tr√™n canvas drone)
        if(state !== "MSG") {
            ctx.font = "14px monospace";
            m_cols.forEach((y, i) => {
                ctx.fillStyle = matrixColor;
                let char = M_CHARS[Math.floor(Math.random()*M_CHARS.length)];
                ctx.fillText(char, i*20, y);
                m_cols[i] = (y > h + Math.random()*10000) ? 0 : y + 20;
            });
        }

        // 3. Drones
        ctx.shadowBlur = 10; ctx.shadowColor = drones.length>0 ? drones[0].c : "#FF69B4";
        drones.forEach(d => {
            d.x += (d.tx - d.x) * 0.1; d.y += (d.ty - d.y) * 0.1;
            ctx.fillStyle = d.c; ctx.fillRect(d.x, d.y, DOT_SIZE, DOT_SIZE);
        });
        ctx.shadowBlur = 0;

        // 4. Fireworks & Particles
        for(let i=fireworks.length-1; i>=0; i--) {
            let f = fireworks[i]; f.y += f.vy; f.vy += 0.2;
            ctx.fillStyle = f.c; ctx.fillRect(f.x, f.y, 3, 3);
            if(f.vy >= 0) { explodeHeart(f); fireworks.splice(i, 1); }
        }
        for(let i=particles.length-1; i>=0; i--) {
            let p = particles[i]; p.x += p.vx; p.y += p.vy; p.vy += p.g; p.l -= 0.02;
            if(p.l <= 0) particles.splice(i, 1);
            else { ctx.globalAlpha = Math.min(p.l, 1); ctx.fillStyle = p.c; ctx.fillRect(p.x, p.y, 2, 2); ctx.globalAlpha = 1; }
        }
    }
    loop();

</script>
</body>
</html>
