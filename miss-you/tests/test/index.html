<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SON_HACKER_V15_HD</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Black+Ops+One&display=swap');
        
        body { margin: 0; overflow: hidden; background-color: #000; font-family: 'Share Tech Mono', monospace; }
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }

        /* UI Layer */
        #ui-layer {
            position: absolute; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; z-index: 999; pointer-events: none;
        }

        /* N√∫t Start */
        .cyber-btn {
            pointer-events: auto; background: #000; color: #0F0; border: 2px solid #0F0;
            padding: 20px 50px; font-size: 24px; cursor: pointer; 
            font-family: 'Black Ops One', cursive; letter-spacing: 3px;
            box-shadow: 0 0 20px #0F0; text-shadow: 0 0 10px #0F0;
            transition: 0.3s; animation: pulse 1s infinite;
        }
        .cyber-btn:hover { background: #0F0; color: #000; box-shadow: 0 0 60px #0F0; }

        /* 3D Cube */
        #cube-container { display: none; perspective: 1000px; width: 200px; height: 200px; }
        #cube { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; animation: spin 4s infinite linear; }
        .face {
            position: absolute; width: 196px; height: 196px;
            border: 2px solid #0F0; background: rgba(0, 255, 0, 0.1);
            color: #0F0; font-size: 100px; display: flex;
            justify-content: center; align-items: center;
            font-family: 'Black Ops One'; box-shadow: 0 0 20px rgba(0,255,0,0.5);
        }
        .front { transform: translateZ(100px); } .back { transform: rotateY(180deg) translateZ(100px); }
        .right { transform: rotateY(90deg) translateZ(100px); } .left { transform: rotateY(-90deg) translateZ(100px); }
        .top { transform: rotateX(90deg) translateZ(100px); } .bottom { transform: rotateX(-90deg) translateZ(100px); }
        @keyframes spin { from { transform: rotateX(0) rotateY(0); } to { transform: rotateX(360deg) rotateY(360deg); } }

        /* M√†n h√¨nh Virus */
        #virus-alert {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(50, 0, 0, 0.8); z-index: 2000;
            flex-direction: column; justify-content: center; align-items: center;
        }
        .alert-box {
            border: 5px solid #F00; padding: 40px; background: #000;
            color: #F00; font-family: 'Black Ops One'; font-size: clamp(30px, 5vw, 60px);
            text-align: center; box-shadow: 0 0 50px #F00;
            animation: glitch 0.2s infinite;
        }
        .shake-screen { animation: shake 0.5s infinite; }

        /* M√†n h√¨nh T√¢m th∆∞ */
        #message-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); display: none;
            flex-direction: column; justify-content: center; align-items: center;
            z-index: 2000; padding: 20px; box-sizing: border-box;
        }
        #msg-body {
            color: #0F0; font-size: 16px; line-height: 1.6; 
            font-family: 'Share Tech Mono', monospace; white-space: pre-wrap;
            max-width: 800px; text-align: left; border-left: 2px solid #0F0; padding-left: 20px;
        }
        #skip-btn { margin-top: 20px; border: 1px solid #FFF; background: transparent; color: #FFF; padding: 10px; cursor: pointer; display: none; }

        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }
        @keyframes glitch { 0% { opacity: 1; } 50% { opacity: 0.7; transform: skewX(10deg); } 100% { opacity: 1; } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .cursor { display: inline-block; width: 10px; height: 20px; background: #0F0; animation: blink 0.5s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

    </style>
</head>
<body>
    <canvas id="mainCanvas"></canvas>
    
    <div id="ui-layer">
        <button id="start-btn" class="cyber-btn">HACK SYSTEM</button>
        <div id="cube-container">
            <div id="cube">
                <div class="face front">10</div><div class="face back">10</div>
                <div class="face right">10</div><div class="face left">10</div>
                <div class="face top">10</div><div class="face bottom">10</div>
            </div>
        </div>
    </div>

    <div id="virus-alert">
        <div class="alert-box">
            ‚ö† WARNING ‚ö†<br>VIRUS DETECTED<br>SYSTEM COMPROMISED
        </div>
    </div>

    <div id="message-overlay">
        <div style="color: #F00; font-size: 20px; margin-bottom: 20px; border-bottom: 2px solid #F00;">SECRET FILE DECRYPTED</div>
        <div id="msg-body"></div>
        <button id="skip-btn">TI·∫æP T·ª§C >></button>
    </div>

    <audio id="bg-music" src="https://nguyenbacson.io.vn/miss-you-happy-birthday.mp3" loop crossorigin="anonymous"></audio>

<script>
    // --- N·ªòI DUNG T√ÇM TH∆Ø ---
    const MY_WISH = `D∆∞∆°ng ∆°i, h√¥m nay l√† ng√†y 01/03/2026, c·∫≠u tr√≤n 19 tu·ªïi.

T·ªõ ch√∫c c·∫≠u ng√†y c√†ng xinh ƒë·∫πp, h·ªçc gi·ªèi, ƒë·∫°t ƒë∆∞·ª£c k·∫øt qu·∫£ cao trong h·ªçc t·∫≠p, s·ªõm ƒë·∫°t ƒë∆∞·ª£c nh·ªØng ∆∞·ªõc m∆° m√† c·∫≠u ƒë√£ t·ª´ng mong ∆∞·ªõc.

T·ªõ c≈©ng xin l·ªói, th·ªùi gian v·ª´a qua ƒë√£ l√†m c·∫≠u ph·∫£i bu·ªìn, gi·∫≠n, ch√°n gh√©t t·ªõ. Th√¥i c≈©ng ƒë√£ qua nƒÉm m·ªõi t·ªõ mong r·∫±ng c·∫≠u c√≥ th·ªÉ kh√¥ng ƒë·ªÉ b·ª•ng ƒë·∫øn t√≠nh c√°ch "tr·∫ª tr√¢u" c·ªßa t·ªõ.

T·ªõ c·∫£m ∆°n c·∫≠u r·∫•t nhi·ªÅu!

-- Nguy·ªÖn B·∫Øc S∆°n --`;

    const SCRIPT = [
        { text: "G·ª¨I ƒê·∫æN\nTR∆Ø∆†NG TH·ªä D∆Ø∆†NG", color: "#0F0" }, 
        { text: "CH√öC M·ª™NG\nNƒÇM M·ªöI 2026", color: "#FFD700" }, 
        { text: "XU√ÇN B√çNH NG·ªå\nTH√ÄNH C√îNG R·ª∞C R·ª†", color: "#00FFFF" }, 
        { text: "HAPPY VALENTINE\n14/02 NG·ªåT NG√ÄO", color: "#FF0055" }, 
        { text: "QU·ªêC T·∫æ PH·ª§ N·ªÆ\n8/3 VUI V·∫∫", color: "#FFF" }, 
        { text: "HAPPY BIRTHDAY\nSINH NH·∫¨T VUI V·∫∫", color: "#FFD700" },
        { text: "TU·ªîI 19\nT·ªéA S√ÅNG LUNG LINH", color: "#00FFFF" },
        { action: "SHOW_MESSAGE" } 
    ];

    const CONFIG = { SCENE_DURATION: 10000 }; 

    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    const isMobile = window.innerWidth < 768;

    // Variables
    const CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let columns = [];
    let fontSize = 16;
    let matrixColor = "#0F0"; 

    let state = "IDLE"; 
    let drones = [];
    let fireworks = [];
    let particles = [];
    let hearts = []; 
    let fountains = []; 
    let scriptIdx = 0;
    let countdownVal = 10;

    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        let cols = width / fontSize;
        columns = [];
        for(let i=0; i<cols; i++) columns[i] = 1;
    }
    window.addEventListener('resize', resize);
    resize();

    // --- KH·ªûI ƒê·ªòNG ---
    document.getElementById('start-btn').onclick = function() {
        this.style.display = 'none';
        document.getElementById('bg-music').play().catch(() => {});
        startCountdown();
    };

    // --- PHASE 1: COUNTDOWN ---
    function startCountdown() {
        state = "COUNTDOWN";
        const cubeBox = document.getElementById('cube-container');
        const faces = document.querySelectorAll('.face');
        cubeBox.style.display = 'block';

        let timer = setInterval(() => {
            countdownVal--;
            faces.forEach(f => f.innerText = countdownVal);
            if(countdownVal <= 0) {
                clearInterval(timer);
                cubeBox.style.display = 'none';
                triggerVirus(); 
            }
        }, 1000);
    }

    // --- PHASE 2: VIRUS ATTACK ---
    function triggerVirus() {
        state = "VIRUS";
        matrixColor = "#F00"; 
        document.getElementById('virus-alert').style.display = 'flex';
        document.body.classList.add('shake-screen'); 

        setTimeout(() => {
            document.getElementById('virus-alert').style.display = 'none';
            document.body.classList.remove('shake-screen');
            matrixColor = "#0F0"; 
            startDroneShow(); 
        }, 5000);
    }

    // --- PHASE 3: DRONE SHOW ---
    function startDroneShow() {
        state = "SHOW";
        nextScene();
    }

    function nextScene() {
        if(scriptIdx >= SCRIPT.length) return;
        let scene = SCRIPT[scriptIdx];
        scriptIdx++;

        if(scene.action === "SHOW_MESSAGE") {
            triggerMessageSequence();
            return;
        }

        formText(scene.text, scene.color);
        setTimeout(nextScene, CONFIG.SCENE_DURATION);
    }

    // --- PHASE 4: T√ÇM TH∆Ø ---
    function triggerMessageSequence() {
        state = "READING";
        const overlay = document.getElementById('message-overlay');
        const msgBody = document.getElementById('msg-body');
        const skipBtn = document.getElementById('skip-btn');
        overlay.style.display = 'flex';

        drones.forEach(d => {
            d.tx = Math.random() * width;
            d.ty = Math.random() * height;
            d.color = "rgba(0, 255, 0, 0.1)";
        });

        let i = 0;
        let t = setInterval(() => {
            msgBody.innerText = MY_WISH.substring(0, i);
            msgBody.innerHTML += '<span class="cursor"></span>';
            i++;
            if(i > MY_WISH.length) {
                clearInterval(t);
                msgBody.innerHTML = MY_WISH; 
                skipBtn.style.display = 'block';
                setTimeout(() => { if(state === "READING") startFinale(); }, 10000);
            }
        }, 50);

        skipBtn.onclick = startFinale;
    }

    // --- PHASE 5: FINALE ---
    function startFinale() {
        document.getElementById('message-overlay').style.display = 'none';
        state = "FINALE";
        
        formCake();
        
        setInterval(() => {
            shootFirework();
            if(Math.random() > 0.4) spawnHeart();
            spawnFountain(); 
        }, 300);
    }

    // --- LOGIC V·∫º (ƒê√É T·ªêI ∆ØU ƒê·ªò N√âT) ---
    function formText(text, color) {
        const lines = text.split('\n');
        const offCv = document.createElement('canvas');
        const offCtx = offCv.getContext('2d');
        // TƒÉng k√≠ch th∆∞·ªõc font ngu·ªìn ƒë·ªÉ l·∫•y m·∫´u n√©t h∆°n
        let fSize = isMobile ? 80 : 150;
        
        offCtx.font = `900 ${fSize}px "Share Tech Mono"`;
        let maxW = 0;
        lines.forEach(l => {
            let m = offCtx.measureText(l);
            if(m.width > maxW) maxW = m.width;
        });
        
        offCv.width = maxW + 50;
        offCv.height = lines.length * fSize * 1.5;
        offCtx.font = `900 ${fSize}px "Share Tech Mono"`;
        offCtx.fillStyle = '#fff';
        offCtx.textAlign = 'center'; offCtx.textBaseline = 'middle';
        
        lines.forEach((l, i) => {
            offCtx.fillText(l, offCv.width/2, fSize * 0.8 + i * fSize);
        });
        processPoints(offCv, color);
    }

    function formCake() {
        const offCv = document.createElement('canvas');
        const offCtx = offCv.getContext('2d');
        let s = Math.min(width, height) * 0.8;
        offCv.width = s; offCv.height = s;
        offCtx.textAlign = 'center'; offCtx.textBaseline = 'middle';
        offCtx.font = `${s/2}px Arial`;
        offCtx.fillStyle = '#fff';
        offCtx.fillText("üéÇ", s/2, s/2);
        processPoints(offCv, "#FFD700");
    }

    function processPoints(offCv, color) {
        let points = [];
        let data = offCtx = offCv.getContext('2d').getImageData(0,0, offCv.width, offCv.height).data;
        
        // GI·∫¢M STEP ƒê·ªÇ TƒÇNG M·∫¨T ƒê·ªò ƒêI·ªÇM ·∫¢NH (N√âT H∆†N)
        // Mobile: step 3, PC: step 2 (R·∫•t d√†y)
        let step = isMobile ? 3 : 2; 
        
        let scale = Math.min(width*0.9/offCv.width, height*0.7/offCv.height);
        let startX = (width - offCv.width*scale)/2;
        let startY = (height - offCv.height*scale)/2;

        for(let y=0; y<offCv.height; y+=step) {
            for(let x=0; x<offCv.width; x+=step) {
                if(data[(y*offCv.width+x)*4+3] > 128) {
                    points.push({x: startX + x*scale, y: startY + y*scale});
                }
            }
        }

        // Gi·ªõi h·∫°n s·ªë l∆∞·ª£ng drone t·ªëi ƒëa ƒë·ªÉ tr√°nh lag tr√™n m√°y y·∫øu
        const MAX_DRONES = isMobile ? 3500 : 5000;
        if (points.length > MAX_DRONES) {
            points.sort(() => Math.random() - 0.5);
            points = points.slice(0, MAX_DRONES);
        }

        updateDrones(points, color);
    }

    function updateDrones(points, color) {
        points.sort(() => Math.random() - 0.5);
        if(drones.length < points.length) {
            for(let i=0; i<points.length - drones.length; i++) {
                drones.push({
                    x: Math.random()*width, y: height+100,
                    tx: width/2, ty: height/2,
                    color: color, size: 2 // K√≠ch th∆∞·ªõc drone l√† 2px
                });
            }
        }
        drones.forEach((d, i) => {
            if(i < points.length) {
                d.tx = points[i].x; d.ty = points[i].y; d.color = color;
            } else {
                d.tx = Math.random()*width; d.ty = Math.random()*height;
                d.color = "rgba(0,0,0,0)";
            }
        });
    }

    // --- RENDER ---
    function drawMatrix() {
        ctx.fillStyle = state === "VIRUS" ? 'rgba(50, 0, 0, 0.2)' : 'rgba(0, 0, 0, 0.05)';
        ctx.fillRect(0, 0, width, height);
        ctx.fillStyle = matrixColor;
        ctx.font = fontSize + 'px monospace';
        for(let i=0; i<columns.length; i++) {
            let char = CHARS[Math.floor(Math.random()*CHARS.length)];
            ctx.fillText(char, i*fontSize, columns[i]*fontSize);
            if(columns[i]*fontSize > height && Math.random() > 0.975) columns[i] = 0;
            columns[i]++;
        }
    }

    function shootFirework() {
        fireworks.push({
            x: Math.random()*width, y: height,
            tx: Math.random()*width, ty: Math.random()*height*0.5,
            vx: 0, vy: -15, color: `hsl(${Math.random()*360}, 100%, 50%)`, state: "RISE"
        });
    }

    function spawnHeart() {
        hearts.push({
            x: Math.random()*width, y: -20,
            vy: Math.random()*3 + 1, size: Math.random()*20 + 10
        });
    }

    function spawnFountain() {
        particles.push({
            x: width/2 + (Math.random()-0.5)*100, y: height,
            vx: (Math.random()-0.5)*10, vy: -Math.random()*20 - 10,
            color: "#FFD700", life: 1, gravity: 0.5
        });
    }

    function animate() {
        requestAnimationFrame(animate);

        if(state !== "READING") drawMatrix();
        else { ctx.fillStyle="rgba(0,0,0,0.8)"; ctx.fillRect(0,0,width,height); }

        drones.forEach(d => {
            d.x += (d.tx - d.x) * 0.08;
            d.y += (d.ty - d.y) * 0.08;
            ctx.fillStyle = d.color;
            ctx.fillRect(d.x, d.y, d.size, d.size);
        });

        for(let i=fireworks.length-1; i>=0; i--) {
            let fw = fireworks[i];
            fw.y += fw.vy; fw.vy += 0.2;
            ctx.fillStyle = fw.color; ctx.fillRect(fw.x, fw.y, 3, 3);
            if(fw.vy >= 0) {
                for(let j=0; j<30; j++) {
                    let a = Math.random()*Math.PI*2, s = Math.random()*5;
                    particles.push({
                        x: fw.x, y: fw.y, vx: Math.cos(a)*s, vy: Math.sin(a)*s,
                        color: fw.color, life: 1, gravity: 0.1
                    });
                }
                fireworks.splice(i, 1);
            }
        }

        for(let i=particles.length-1; i>=0; i--) {
            let p = particles[i];
            p.x += p.vx; p.y += p.vy; p.vy += p.gravity; p.life -= 0.02;
            if(p.life <= 0) particles.splice(i, 1);
            else {
                ctx.globalAlpha = p.life; ctx.fillStyle = p.color;
                ctx.fillRect(p.x, p.y, 2, 2); ctx.globalAlpha = 1;
            }
        }

        if(state === "FINALE") {
            for(let i=hearts.length-1; i>=0; i--) {
                let h = hearts[i];
                h.y += h.vy;
                ctx.fillStyle = "#F00"; ctx.font = `${h.size}px Arial`;
                ctx.fillText("‚ù§Ô∏è", h.x, h.y);
                if(h.y > height) hearts.splice(i, 1);
            }
        }
    }
    animate();
</script>
</body>
</html>
