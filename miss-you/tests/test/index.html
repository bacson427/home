<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HPBD D∆Ø∆†NG 19 ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@600;700&family=Montserrat:wght@800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #ff8fa3;
            --bg: #fff0f3;
            --text-main: #800f2f;
            --glass: rgba(255, 255, 255, 0.7);
        }

        body { 
            margin: 0; overflow: hidden; 
            background: var(--bg); 
            font-family: 'Quicksand', sans-serif;
            touch-action: none;
        }

        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 2; pointer-events: none; }
        #hearts-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; overflow: hidden; }

        /* --- 1. M√ÄN H√åNH ƒê·∫æM NG∆Ø·ª¢C --- */
        #countdown-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: var(--bg); transition: opacity 1s;
        }

        .container-box {
            text-align: center; background: rgba(255, 255, 255, 0.6);
            padding: 2rem; border-radius: 20px;
            box-shadow: 0 15px 35px rgba(255, 77, 109, 0.2);
            border: 2px solid #fff; max-width: 90%;
            backdrop-filter: blur(10px);
        }

        h1.title { color: var(--text-main); margin-bottom: 20px; font-size: 1.5rem; font-family: 'Montserrat', sans-serif; text-transform: uppercase; letter-spacing: 1px;}

        #countdown { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .time-box {
            background: var(--primary); color: white;
            padding: 10px; border-radius: 12px; min-width: 60px;
            box-shadow: 0 5px 15px rgba(255, 117, 143, 0.4);
        }
        .time-box span { display: block; font-size: 1.8rem; font-weight: bold; font-family: 'Montserrat', sans-serif; }
        .label { font-size: 0.7rem; text-transform: uppercase; margin-top: 5px; }

        #admin-btn {
            margin-top: 20px; cursor: pointer; color: var(--secondary);
            font-size: 30px; opacity: 0.5; transition: 0.3s;
        }
        #admin-btn:hover { transform: scale(1.2) rotate(15deg); opacity: 1; color: var(--primary); }

        /* --- 2. H·ªòP QU√Ä B√ç M·∫¨T --- */
        #gift-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 9000; display: none; flex-direction: column; 
            justify-content: center; align-items: center;
            background: rgba(255, 240, 243, 0.9);
            transition: opacity 1s;
        }

        .gift-container { position: relative; cursor: pointer; animation: bounce 2s infinite; margin-bottom: 20px; }
        .gift-box { width: 120px; height: 120px; background: #ff4d6d; border-radius: 10px; box-shadow: 0 10px 25px rgba(255, 77, 109, 0.4); position: relative; z-index: 10; }
        .gift-lid { width: 140px; height: 30px; background: #d90429; position: absolute; top: -15px; left: -10px; border-radius: 5px; z-index: 11; }
        .ribbon-vertical { width: 20px; height: 100%; background: #fff; position: absolute; left: 50px; top: 0; }
        .ribbon-horizontal { width: 100%; height: 20px; background: #fff; position: absolute; top: 50px; left: 0; }
        .bow { width: 60px; height: 30px; border: 5px solid #fff; border-radius: 50%; position: absolute; top: -40px; left: 30px; transform: rotate(-10deg); }
        .bow::before { content: ''; position: absolute; width: 60px; height: 30px; border: 5px solid #fff; border-radius: 50%; top: 0; left: -15px; transform: rotate(20deg); }

        .tap-hint { font-family: 'Montserrat', sans-serif; color: #d90429; font-weight: bold; font-size: 1.2rem; animation: pulse 1s infinite; }

        /* --- 3. TERMINAL --- */
        #virus-terminal { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255, 255, 255, 0.95); color: var(--text-main); 
            padding: 20px; box-sizing: border-box; font-size: 14px; 
            overflow: hidden; display: none; z-index: 2001;
            font-family: 'Courier New', monospace; font-weight: bold; line-height: 1.6;
        }

        /* --- 4. T√ÇM TH∆Ø --- */
        #msg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; z-index: 3000;
            flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 1.5s;
        }
        #msg-layer.visible { opacity: 1; }
        
        #msg-box {
            width: 85%; max-width: 550px; max-height: 60vh; overflow-y: auto;
            background: rgba(255, 255, 255, 0.9); border: 2px solid #fff;
            padding: 30px; border-radius: 25px; 
            box-shadow: 0 20px 50px rgba(255, 0, 80, 0.2);
            color: var(--text-main); font-family: 'Quicksand'; font-size: clamp(16px, 4vw, 19px); 
            line-height: 1.8; white-space: pre-wrap; font-weight: 600;
            backdrop-filter: blur(15px);
        }
        
        #next-btn {
            margin-top: 25px; padding: 12px 35px; border: none;
            background: var(--primary); color: white; border-radius: 30px;
            font-family: 'Montserrat', sans-serif; font-weight: bold; 
            cursor: pointer; display: none;
            box-shadow: 0 5px 15px rgba(255, 77, 109, 0.4);
        }

        /* --- 5. TRANSITION --- */
        #white-flash {
            position: fixed; top:0; left:0; width:100%; height:100%; background: #fff0f3;
            z-index: 9999; opacity: 0; pointer-events: none; transition: opacity 2s;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }
        .loading-heart { font-size: 60px; animation: beat 0.8s infinite; color: var(--primary);}
        .loading-text { margin-top: 15px; color: var(--text-main); font-family: 'Dancing Script'; font-size: 28px; font-weight: bold;}

        /* Tim bay n·ªÅn */
        .heart-bg { position: absolute; color: var(--secondary); font-size: 20px; user-select: none; animation: floatUp 5s linear infinite; opacity: 0; }
        @keyframes floatUp { 0% { transform: translateY(100vh) rotate(0deg); opacity: 0.8; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes beat { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes shake { 0% { transform: rotate(0); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } 100% { transform: rotate(0); } }
    </style>
</head>
<body>
    
    <div id="hearts-bg"></div>
    <canvas id="c"></canvas>

    <div id="countdown-layer">
        <div class="container-box">
            <h1 class="title">S·∫ÆP ƒê·∫æN SINH NH·∫¨T D∆Ø∆†NG R·ªíI! üéÇ</h1>
            <div id="countdown">
                <div class="time-box"><span id="d">00</span><div class="label">Ng√†y</div></div>
                <div class="time-box"><span id="h">00</span><div class="label">Gi·ªù</div></div>
                <div class="time-box"><span id="m">00</span><div class="label">Ph√∫t</div></div>
                <div class="time-box"><span id="s">00</span><div class="label">Gi√¢y</div></div>
            </div>
            <div style="margin-top: 20px; font-size: 14px; color: #888;">01/03/2026</div>
            <div id="admin-btn" onclick="adminUnlock()">üîí</div>
        </div>
    </div>

    <div id="gift-layer" onclick="openGift()">
        <div class="gift-container" id="gift-box-anim">
            <div class="bow"></div>
            <div class="gift-lid"></div>
            <div class="gift-box">
                <div class="ribbon-vertical"></div>
                <div class="ribbon-horizontal"></div>
            </div>
        </div>
        <div class="tap-hint">M·ªôt m√≥n qu√† d√†nh ri√™ng cho c·∫≠u üéÅ</div>
        <div style="font-size: 12px; color: #ff8fa3; margin-top: 5px;">(Ch·∫°m v√†o h·ªôp qu√† ƒë·ªÉ m·ªü)</div>
    </div>

    <div id="virus-terminal"></div>

    <div id="msg-layer">
        <div style="color: #ff4d6d; font-size: 35px; font-family: 'Dancing Script'; margin-bottom: 15px; font-weight: bold;">üíå Th∆∞ G·ª≠i D∆∞∆°ng</div>
        <div id="msg-box"></div>
        <button id="next-btn" onclick="doTransition()">XEM ƒêI·ªÄU B·∫§T NG·ªú >></button>
    </div>

    <div id="white-flash">
        <div class="loading-heart">‚ù§Ô∏è</div>
        <div class="loading-text">Ch·ªù t·ªõ m·ªôt ch√∫t...</div>
    </div>

    <audio id="audio" src="https://nguyenbacson.io.vn/miss-you-happy-birthday.mp3" loop></audio>

<script>
    const TARGET_DATE = new Date("March 1, 2026 00:00:00").getTime();
    const PASS = "01032007";
    
    const LETTER = `Ch√∫c m·ª´ng sinh nh·∫≠t tu·ªïi 19, c√¥ g√°i H√† Nam xinh ƒë·∫πp! üå∏\n\nCh√∫c c√¥ sinh vi√™n ƒê·∫°i h·ªçc Ph∆∞∆°ng ƒê√¥ng sang tu·ªïi m·ªõi h·ªçc t·∫≠p th·∫≠t t·ªët, lu√¥n vui v·∫ª v√† b·ªõt suy nghƒ© linh tinh nh√©.\n\nD√π c√≥ b·∫≠n deadline th√¨ c≈©ng nh·ªõ ƒÉn u·ªëng ƒë·∫ßy ƒë·ªß (ƒë·∫∑c bi·ªát l√† ƒëi ƒÉn nem n∆∞·ªõng cho ƒë·ª° th√®m nha). üç¢\n\nMong r·∫±ng m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi c·∫≠u. Happy Birthday, my special girl! ‚ù§Ô∏è\n\n-- Nguy·ªÖn B·∫Øc S∆°n --`;

    const TERMINAL_LOGS = [
        "> K·∫æT N·ªêI SERVER TR√ÅI TIM...", "> T√åM KI·∫æM: 'TR∆Ø∆†NG TH·ªä D∆Ø∆†NG'", 
        "> QU√ä QU√ÅN: H√Ä NAM", "> ƒê·ªò D·ªÑ TH∆Ø∆†NG: V√î C·ª∞C üå∏", 
        "> ƒêANG T·∫¢I D·ªÆ LI·ªÜU...", "> 3...", "> 2...", "> 1...", "> B·∫ÆT ƒê·∫¶U BU·ªîI TI·ªÜC! ‚ù§Ô∏è"
    ];

    const DRONE_SEQUENCE = [
        { t: 1000, txt: "CH√öC M·ª™NG", color: "#d90429", font: 'Montserrat' },
        { t: 8000, txt: "SINH NH·∫¨T", color: "#ff758f", font: 'Montserrat' },
        { t: 15000, txt: "D∆Ø∆†NG 19", color: "#800f2f", font: 'Montserrat' },
        { t: 23000, shp: "HEART", color: "#d90429" },
        { t: 33000, txt: "XINH ƒê·∫∏P", color: "#ff4d6d", font: 'Dancing Script' },
        { t: 41000, txt: "H·∫†NH PH√öC", color: "#c9184a", font: 'Dancing Script' },
        { t: 50000, action: "SHOW_LETTER" }
    ];

    function createHeartBg() {
        const heart = document.createElement('div');
        heart.classList.add('heart-bg');
        heart.innerHTML = Math.random() < 0.5 ? '‚ù§Ô∏è' : 'üå∏';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.fontSize = Math.random() * 20 + 15 + 'px';
        heart.style.animationDuration = Math.random() * 3 + 4 + 's';
        document.getElementById('hearts-bg').appendChild(heart);
        setTimeout(() => heart.remove(), 7000);
    }
    setInterval(createHeartBg, 400);

    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    let w, h;
    let drones = [], fireworks = [], particles = []; 
    let state = "LOCK"; 
    let formingText = false; // Bi·∫øn ki·ªÉm so√°t xem c√≥ ƒëang x·∫øp ch·ªØ kh√¥ng
    const DOT_GAP = 3; 

    function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function createDrone(x, y) {
        return { x: x || Math.random()*w, y: y || h+100, tx: Math.random()*w, ty: Math.random()*h, color: '#ff758f', size: 2, active: false };
    }

    // 1. ƒê·∫æM NG∆Ø·ª¢C
    function updateTimer() {
        const now = new Date().getTime();
        const dis = TARGET_DATE - now;
        if(dis < 0) { unlock(); return; }
        const d = Math.floor(dis / (1000 * 60 * 60 * 24));
        const ho = Math.floor((dis % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const mi = Math.floor((dis % (1000 * 60 * 60)) / (1000 * 60));
        const se = Math.floor((dis % (1000 * 60)) / 1000);
        document.getElementById("d").innerText = d.toString().padStart(2, '0');
        document.getElementById("h").innerText = ho.toString().padStart(2, '0');
        document.getElementById("m").innerText = mi.toString().padStart(2, '0');
        document.getElementById("s").innerText = se.toString().padStart(2, '0');
    }
    let tmr = setInterval(updateTimer, 1000);
    updateTimer();

    function unlock() {
        clearInterval(tmr);
        document.getElementById("countdown-layer").style.display = "none";
        document.getElementById("gift-layer").style.display = "flex";
        state = "GIFT";
    }

    window.adminUnlock = function() {
        if(prompt("M·∫¨T KH·∫®U (01032007):") == PASS) unlock(); else alert("Sai m·∫≠t kh·∫©u r·ªìi!");
    }

    // 2. M·ªû QU√Ä
    function openGift() {
        document.getElementById("audio").play().catch(()=>{});
        const gift = document.getElementById("gift-box-anim");
        const layer = document.getElementById("gift-layer");
        gift.style.animation = "shake 0.5s";
        setTimeout(() => {
            gift.style.transform = "scale(5)"; gift.style.opacity = "0"; layer.style.opacity = "0";
            // B·∫Øn ph√°o hoa nh·∫π
            for(let i=0; i<5; i++) setTimeout(() => launchFirework("normal"), i*200);
            
            setTimeout(() => { layer.style.display = "none"; runVirus(); }, 800);
        }, 500);
    }

    function runVirus() {
        state = "VIRUS";
        const term = document.getElementById("virus-terminal");
        term.style.display = "block";
        let line = 0, char = 0, txt = "";
        function type() {
            if(line >= TERMINAL_LOGS.length) { setTimeout(() => { term.style.display = "none"; startDroneShow(); }, 1000); return; }
            const str = TERMINAL_LOGS[line];
            term.innerHTML = txt + str.substring(0, char) + "_"; term.scrollTop = term.scrollHeight;
            if(char < str.length) { char++; setTimeout(type, 30); } else { txt += str + "<br><br>"; line++; char=0; setTimeout(type, 200); }
        }
        type();
    }

    // 3. SHOW DI·ªÑN (C·∫¨P NH·∫¨T: PH√ÅO HOA CH·∫¨M + N·ªî TUNG CH·ªÆ)
    window.startDroneShow = function() {
        state = "DRONE";
        formingText = true; // B·∫Øt ƒë·∫ßu x·∫øp ch·ªØ
        document.getElementById("msg-layer").style.display = "none";
        
        // Loop b·∫Øn ph√°o hoa ch·∫≠m r√£i
        setInterval(() => {
            if(state === "DRONE" || state === "MSG") {
                // T·∫ßn su·∫•t th∆∞a h∆°n (1200ms)
                if(Math.random() < 0.8) {
                    let type = Math.random() < 0.4 ? "heart" : "normal"; 
                    launchFirework(type);
                }
            }
        }, 1200); // 1.2 gi√¢y m·ªõi check b·∫Øn 1 l·∫ßn -> R·∫•t ch·∫≠m r√£i

        DRONE_SEQUENCE.forEach(s => {
            setTimeout(() => {
                if(s.action === "SHOW_LETTER") { showMessage(); return; }
                if(s.txt) formText(s.txt, s.color, s.font);
                if(s.shp) formShape(s.shp, s.color);
            }, s.t);
        });
    }

    function showMessage() {
        state = "MSG"; 
        formingText = false; // Ng·ª´ng x·∫øp ch·ªØ
        
        // HI·ªÜU ·ª®NG N·ªî TUNG (Scatter)
        drones.forEach(d => {
            // G√°n ƒë√≠ch ƒë·∫øn l√† v·ªã tr√≠ ng·∫´u nhi√™n (n·ªï tung)
            d.tx = Math.random() * w;
            d.ty = Math.random() * h;
            // ƒê·∫©y nh·∫π drone hi·ªán t·∫°i ƒë·ªÉ t·∫°o ƒë√†
            d.x += (Math.random() - 0.5) * 50;
            d.y += (Math.random() - 0.5) * 50;
            d.active = false;
        });

        const layer = document.getElementById("msg-layer");
        layer.style.display = "flex";
        setTimeout(() => layer.classList.add("visible"), 50);
        const box = document.getElementById("msg-box");
        let i = 0;
        let t = setInterval(() => {
            box.innerText = LETTER.substring(0, i) + "|"; box.scrollTop = box.scrollHeight;
            if(i >= LETTER.length) { clearInterval(t); box.innerText = LETTER; document.getElementById("next-btn").style.display = "block"; }
            i++;
        }, 50);
    }

    window.doTransition = function() {
        drones.forEach(d => { d.tx = w/2; d.ty = h/2; });
        const white = document.getElementById("white-flash");
        white.style.opacity = 1;
        setTimeout(() => { window.location.href = "https://nguyenbacson.io.vn/miss-you/i-love-you/"; }, 3000);
    }

    function formText(text, color, font) {
        if(!formingText) return;
        const tmp = document.createElement('canvas'); const tCtx = tmp.getContext('2d');
        let fSize = Math.min(w / (text.length * 0.7), 100); if(w < 500) fSize = Math.min(w / (text.length * 0.6), 60);
        tCtx.font = `bold ${fSize}px "${font}"`; let measure = tCtx.measureText(text);
        tmp.width = measure.width + 20; tmp.height = fSize * 1.5;
        tCtx.font = `bold ${fSize}px "${font}"`; tCtx.fillStyle = '#000'; tCtx.textAlign = 'center'; tCtx.textBaseline = 'middle';
        tCtx.fillText(text, tmp.width/2, tmp.height/2); processPixels(tmp, color);
    }

    function formShape(type, color) {
        if(!formingText) return;
        let points = [], cx = w/2, cy = h/2, size = Math.min(w, h) * 0.35;
        if(type === "HEART") {
            for(let i=0; i<800; i++) { 
                let t = (i/800) * Math.PI*2; let x = 16 * Math.pow(Math.sin(t), 3); let y = -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t));
                points.push({x: cx + x*(size/18), y: cy + y*(size/18)});
            }
        }
        updateDrones(points, color);
    }

    function processPixels(canvas, color) {
        const data = canvas.getContext('2d').getImageData(0,0, canvas.width, canvas.height).data;
        let points = []; let startX = (w - canvas.width)/2; let startY = (h - canvas.height)/2;
        for(let y=0; y<canvas.height; y+=DOT_GAP) {
            for(let x=0; x<canvas.width; x+=DOT_GAP) { if(data[(y*canvas.width + x)*4 + 3] > 128) points.push({x: startX + x, y: startY + y}); }
        }
        updateDrones(points, color);
    }

    function updateDrones(points, color) {
        if(drones.length > points.length) drones.splice(points.length).forEach(d => d.active = false);
        while(drones.length < points.length) drones.push(createDrone());
        drones.forEach((d, i) => {
            if(i < points.length) { d.tx = points[i].x; d.ty = points[i].y; d.color = color; d.active = true; } 
            else { d.tx = Math.random()*w; d.ty = h + 100; d.active = false; }
        });
    }

    // --- C·∫¨P NH·∫¨T LOGIC PH√ÅO HOA CH·∫¨M ---
    function launchFirework(type = "normal") {
        let fwColor = type === "heart" ? "#ff0040" : `hsl(${Math.random() * 360}, 100%, 60%)`;
        fireworks.push({
            x: Math.random() * w, 
            y: h,
            // Gi·∫£m t·ªëc ƒë·ªô b·∫Øn l√™n (vy) ƒë·ªÉ n√≥ bay th·∫•p v√† ch·∫≠m h∆°n
            vx: (Math.random() - 0.5) * 3, 
            vy: -(Math.random() * 3 + 8), // Bay ch·∫≠m, ko qu√° cao
            color: fwColor,
            exploded: false,
            type: type 
        });
    }

    function loop() {
        ctx.clearRect(0, 0, w, h);
        
        // V·∫Ω ph√°o hoa
        for (let i = fireworks.length - 1; i >= 0; i--) {
            let f = fireworks[i];
            if (!f.exploded) {
                f.x += f.vx; f.y += f.vy; 
                f.vy += 0.1; // Tr·ªçng l·ª±c nh·∫π (0.1 thay v√¨ 0.2) ƒë·ªÉ bay ch·∫≠m
                ctx.fillStyle = f.color; ctx.beginPath(); ctx.arc(f.x, f.y, 3, 0, Math.PI * 2); ctx.fill();
                
                if (f.vy >= 0) { // N·ªï
                    f.exploded = true;
                    // Logic n·ªï
                    if(f.type === "heart") {
                        for (let k = 0; k < 40; k++) {
                            let angle = (Math.PI * 2 * k) / 40;
                            let vScale = 0.5 + Math.random()*0.2; 
                            let vx = 16 * Math.pow(Math.sin(angle), 3); 
                            let vy = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle));
                            particles.push({ x: f.x, y: f.y, vx: vx * vScale * 0.1, vy: vy * vScale * 0.1, life: 2, color: f.color });
                        }
                    } else {
                        for (let j = 0; j < 30; j++) { 
                            particles.push({ x: f.x, y: f.y, vx: (Math.random() - 0.5) * 6, vy: (Math.random() - 0.5) * 6, life: 2, color: f.color }); 
                        }
                    }
                    fireworks.splice(i, 1);
                }
            }
        }
        
        // V·∫Ω h·∫°t sau khi n·ªï (R∆°i ch·∫≠m)
        for (let i = particles.length - 1; i >= 0; i--) {
            let p = particles[i]; 
            p.x += p.vx; p.y += p.vy; 
            p.life -= 0.01; // Tan bi·∫øn r·∫•t ch·∫≠m (gi·ªØ m√†u l√¢u)
            p.vy += 0.03; // Tr·ªçng l·ª±c c·ª±c nh·∫π khi r∆°i
            
            if (p.life <= 0) {
                particles.splice(i, 1); 
            } else { 
                ctx.globalAlpha = Math.min(p.life, 1); 
                ctx.fillStyle = p.color; 
                ctx.beginPath(); 
                ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); 
                ctx.fill(); 
                ctx.globalAlpha = 1; 
            }
        }

        // V·∫Ω Drone (X·ª≠ l√Ω hi·ªáu ·ª©ng n·ªï tung)
        if(state === "DRONE" || state === "MSG") {
            drones.forEach(d => {
                // N·∫øu state l√† MSG (ƒë·ªçc th∆∞), c√°c ƒëi·ªÉm s·∫Ω di chuy·ªÉn t·ª± do (n·ªï tung)
                // N·∫øu formingText = false, target (tx, ty) ƒë√£ ƒë∆∞·ª£c set random ·ªü h√†m showMessage
                d.x += (d.tx - d.x) * 0.05; // Di chuy·ªÉn ch·∫≠m v·ªÅ ƒë√≠ch random
                d.y += (d.ty - d.y) * 0.05;
                
                // V·∫Ω
                ctx.fillStyle = d.color; 
                ctx.beginPath(); ctx.arc(d.x, d.y, 1.5, 0, Math.PI*2); ctx.fill(); 
            });
        }
        requestAnimationFrame(loop);
    }
    loop();
</script>
</body>
</html>
