<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PROJECT: D.U.O.N.G - v10.0</title>
    <style>
        /* Font ƒë·∫≠m ch·∫•t Hacker/Khoa h·ªçc vi·ªÖn t∆∞·ªüng */
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@900&display=swap');
        
        body { margin: 0; overflow: hidden; background-color: #000; font-family: 'Share Tech Mono', monospace; }
        
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }

        /* UI Layer */
        #ui-layer {
            position: absolute; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; z-index: 100; pointer-events: none;
        }

        /* N√∫t b·∫•m kh·ªüi ƒë·ªông */
        .cyber-btn {
            pointer-events: auto; background: transparent; 
            color: #0F0; border: 2px solid #0F0;
            padding: 20px 60px; font-size: 24px; cursor: pointer; 
            font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 4px;
            box-shadow: 0 0 15px #0F0, inset 0 0 15px #0F0;
            text-shadow: 0 0 10px #0F0;
            transition: all 0.3s;
            animation: glitch 1s infinite;
        }
        .cyber-btn:hover { background: #0F0; color: #000; box-shadow: 0 0 50px #0F0; }

        /* M√†n h√¨nh Boot (D√≤ng l·ªánh ch·∫°y) */
        #console-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; padding: 20px; box-sizing: border-box;
            color: #0F0; font-size: 14px; line-height: 1.5;
            overflow: hidden; display: none; z-index: 150;
            text-shadow: 0 0 5px #0F0;
        }

        /* S·ªë ƒë·∫øm ng∆∞·ª£c 3D Xoay */
        #countdown-3d {
            display: none; position: relative; width: 200px; height: 200px;
            transform-style: preserve-3d; animation: spinCube 2s infinite linear;
            z-index: 120;
        }
        .face {
            position: absolute; width: 200px; height: 200px;
            background: rgba(0, 255, 0, 0.1); border: 2px solid #0F0;
            display: flex; justify-content: center; align-items: center;
            font-size: 100px; color: #fff; font-family: 'Orbitron';
            text-shadow: 0 0 20px #0F0;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.2);
        }
        /* T·∫°o h√¨nh kh·ªëi l·∫≠p ph∆∞∆°ng */
        .face:nth-child(1) { transform: translateZ(100px); }
        .face:nth-child(2) { transform: rotateY(90deg) translateZ(100px); }
        .face:nth-child(3) { transform: rotateY(180deg) translateZ(100px); }
        .face:nth-child(4) { transform: rotateY(-90deg) translateZ(100px); }
        .face:nth-child(5) { transform: rotateX(90deg) translateZ(100px); }
        .face:nth-child(6) { transform: rotateX(-90deg) translateZ(100px); }

        @keyframes spinCube {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        /* M√†n t√¢m th∆∞ Hacker */
        #letter-box {
            position: absolute; width: 90%; max-width: 700px;
            background: rgba(0, 20, 0, 0.95); border: 1px solid #0F0;
            padding: 30px; display: none; flex-direction: column;
            box-shadow: 0 0 50px #0F0; z-index: 200;
        }
        #letter-text {
            color: #0F0; font-size: 18px; text-align: justify;
            text-shadow: 0 0 5px #0F0;
        }

        @keyframes glitch {
            0% { transform: translate(0) } 20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) } 60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) } 100% { transform: translate(0) }
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>
    
    <div id="ui-layer">
        <button id="start-btn" class="cyber-btn">INITIALIZE</button>
        <div id="countdown-3d">
            <div class="face">10</div><div class="face">10</div>
            <div class="face">10</div><div class="face">10</div>
            <div class="face">10</div><div class="face">10</div>
        </div>
        <div id="letter-box">
            <div id="letter-text"></div>
        </div>
    </div>

    <div id="console-container"></div>

    <audio id="bg-music" src="https://nguyenbacson.io.vn/miss-you-happy-birthday.mp3" loop crossorigin="anonymous"></audio>

<script>
    // --- C·∫§U H√åNH ---
    const CONFIG = {
        // M·ªói m√†n text hi·ªán trong 12 gi√¢y (C√¢u gi·ªù c·ª±c m·∫°nh)
        SCENE_DURATION: 12000, 
        BOOT_DURATION: 8000, // 8 gi√¢y ch·∫°y d√≤ng l·ªánh
        COUNTDOWN: 10
    };

    // K·ªãch b·∫£n chia nh·ªè (ƒÇn b·ªõt th·ªùi gian + Ch·ªØ to)
    const SCRIPT = [
        { text: "ƒê·ªêI T∆Ø·ª¢NG:\nTR∆Ø∆†NG TH·ªä D∆Ø∆†NG", color: "#0F0" }, // Xanh Hacker
        { text: "NHI·ªÜM V·ª§:\nCH√öC M·ª™NG 2026", color: "#FFD700" }, // V√†ng
        { text: "M√É L·ªÜNH:\nXU√ÇN B√çNH NG·ªå üê¥", color: "#00FFFF" }, // Cyan
        { text: "S·ª∞ KI·ªÜN 1:\nHAPPY VALENTINE", color: "#FF0055" }, // H·ªìng
        { text: "S·ª∞ KI·ªÜN 2:\nQU·ªêC T·∫æ PH·ª§ N·ªÆ", color: "#FFF" }, // Tr·∫Øng
        { text: "S·ª∞ KI·ªÜN CH√çNH:\nSINH NH·∫¨T TU·ªîI 19", color: "#FFD700" },
        { text: "TR·∫†NG TH√ÅI:\nXINH ƒê·∫∏P R·∫†NG NG·ªúI", color: "#00FFFF" },
        { action: "LETTER" }
    ];

    const cv = document.getElementById('matrixCanvas');
    const ctx = cv.getContext('2d');
    let width, height;
    
    // Matrix Rain Variables (Pha tr·ªôn ti·∫øng Latinh/Hy L·∫°p)
    // Bao g·ªìm: Katakana, S·ªë, Latin, Hy L·∫°p
    const CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789Œ©Œ£ŒîŒ®Œ¶ŒûŒõŒ†ŒìŒòabcdefghijklmnopqrstuvwxyz";
    let columns = [];
    let fontSize = 16;

    // Drone Variables
    let drones = [];
    let state = "IDLE"; // IDLE, BOOT, COUNTDOWN, SHOW, LETTER

    function resize() {
        width = cv.width = window.innerWidth;
        height = cv.height = window.innerHeight;
        let cols = width / fontSize;
        columns = [];
        for(let i=0; i<cols; i++) columns[i] = 1;
    }
    window.addEventListener('resize', resize);
    resize();

    // --- START SEQUENCE ---
    document.getElementById('start-btn').onclick = function() {
        this.style.display = 'none';
        document.getElementById('bg-music').play().catch(console.log);
        
        // GIAI ƒêO·∫†N 1: BOOT SEQUENCE
        runBootSequence();
    };

    function runBootSequence() {
        state = "BOOT";
        const consoleDiv = document.getElementById('console-container');
        consoleDiv.style.display = 'block';
        
        const logs = [
            "INITIALIZING KERNEL...",
            "LOADING MODULES: [‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë] 60%",
            "ACCESSING MAINFRAME...",
            "BYPASSING FIREWALL (LEVEL 5)...",
            "DECRYPTING USER DATA: 'TRUONG_THI_DUONG'...",
            "SCANNING BIOMETRICS... MATCH FOUND.",
            "UPLOADING BIRTHDAY PROTOCOL...",
            "LOADING ASSETS... [OK]",
            "SYSTEM BREACH SUCCESSFUL."
        ];

        let i = 0;
        let interval = setInterval(() => {
            if(i < logs.length) {
                consoleDiv.innerHTML += `> ${logs[i]}<br>`;
                consoleDiv.scrollTop = consoleDiv.scrollHeight;
                i++;
            } else {
                clearInterval(interval);
                setTimeout(() => {
                    consoleDiv.style.display = 'none';
                    startCountdown3D();
                }, 1000);
            }
        }, 800); // T·ªëc ƒë·ªô in d√≤ng l·ªánh
    }

    // GIAI ƒêO·∫†N 2: 3D ROTATING COUNTDOWN
    function startCountdown3D() {
        state = "COUNTDOWN";
        const box = document.getElementById('countdown-3d');
        const faces = document.querySelectorAll('.face');
        box.style.display = 'block';

        let count = CONFIG.COUNTDOWN;
        
        let timer = setInterval(() => {
            count--;
            faces.forEach(f => f.innerText = count);
            
            if(count < 0) {
                clearInterval(timer);
                box.style.display = 'none';
                startDroneShow();
            }
        }, 1000);
    }

    // GIAI ƒêO·∫†N 3: MATRIX & DRONE SHOW
    let scriptIdx = 0;
    function startDroneShow() {
        state = "SHOW";
        nextScene();
    }

    function nextScene() {
        if(scriptIdx >= SCRIPT.length) return;
        
        let scene = SCRIPT[scriptIdx];
        scriptIdx++;

        if(scene.action === "LETTER") {
            setTimeout(showLetter, 1000);
            return;
        }

        formText(scene.text, scene.color);
        setTimeout(nextScene, CONFIG.SCENE_DURATION);
    }

    // --- LOGIC DRONE & TEXT ---
    function formText(text, color) {
        const lines = text.split('\n');
        const offCv = document.createElement('canvas');
        const offCtx = offCv.getContext('2d');
        
        let fSize = width < 768 ? 60 : 120;
        offCtx.font = `900 ${fSize}px "Orbitron"`; // Font Hacker
        
        // T√≠nh k√≠ch th∆∞·ªõc
        let maxW = 0;
        lines.forEach(l => {
            let m = offCtx.measureText(l);
            if(m.width > maxW) maxW = m.width;
        });
        
        offCv.width = maxW + 50;
        offCv.height = lines.length * fSize * 1.3;

        offCtx.font = `900 ${fSize}px "Orbitron"`;
        offCtx.fillStyle = '#fff';
        offCtx.textAlign = 'center';
        offCtx.textBaseline = 'middle';
        
        let startY = fSize/2 + 20;
        lines.forEach((l, i) => {
            offCtx.fillText(l, offCv.width/2, startY + i * fSize);
        });

        // Scan Points
        let points = [];
        let data = offCtx.getImageData(0,0, offCv.width, offCv.height).data;
        let step = width < 768 ? 4 : 3;
        
        // Scale Fit Screen
        let scale = Math.min((width*0.9)/offCv.width, (height*0.7)/offCv.height);
        let startX = (width - offCv.width*scale)/2;
        let startY = (height - offCv.height*scale)/2;

        for(let y=0; y<offCv.height; y+=step) {
            for(let x=0; x<offCv.width; x+=step) {
                if(data[(y*offCv.width + x)*4 + 3] > 128) {
                    points.push({
                        x: startX + x*scale,
                        y: startY + y*scale
                    });
                }
            }
        }
        updateDrones(points, color);
    }

    function updateDrones(points, color) {
        points.sort(() => Math.random() - 0.5); // Randomize
        
        if(drones.length < points.length) {
            let add = points.length - drones.length;
            for(let i=0; i<add; i++) {
                drones.push({
                    x: Math.random()*width, y: Math.random()*height,
                    tx: width/2, ty: height/2,
                    color: color, size: 2
                });
            }
        }

        drones.forEach((d, i) => {
            if(i < points.length) {
                d.tx = points[i].x;
                d.ty = points[i].y;
                d.color = color;
            } else {
                // Drone th·ª´a bay th√†nh v√≤ng tr√≤n b·∫£o v·ªá xung quanh
                let angle = (i / (drones.length - points.length)) * Math.PI * 2;
                let r = Math.min(width, height) * 0.45;
                d.tx = width/2 + Math.cos(angle)*r;
                d.ty = height/2 + Math.sin(angle)*r;
                d.color = "rgba(0, 255, 0, 0.3)"; // M√†u xanh m·ªù
            }
        });
    }

    // --- RENDER MATRIX RAIN ---
    function drawMatrix() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.05)'; // T·∫°o v·ªát m·ªù
        ctx.fillRect(0, 0, width, height);

        ctx.fillStyle = '#0F0';
        ctx.font = fontSize + 'px monospace';

        for(let i=0; i<columns.length; i++) {
            let char = CHARS[Math.floor(Math.random()*CHARS.length)];
            ctx.fillText(char, i*fontSize, columns[i]*fontSize);

            if(columns[i]*fontSize > height && Math.random() > 0.975) {
                columns[i] = 0;
            }
            columns[i]++;
        }
    }

    // --- T√ÇM TH∆Ø ---
    function showLetter() {
        const box = document.getElementById('letter-box');
        const txt = document.getElementById('letter-text');
        box.style.display = 'flex';
        
        let content = "G·ª¨I: TR∆Ø∆†NG TH·ªä D∆Ø∆†NG\n\n[SYSTEM MESSAGE]: Ch√∫c m·ª´ng sinh nh·∫≠t tu·ªïi 19! Ch√∫c c·∫≠u m·ªôt nƒÉm m·ªõi b√πng n·ªï nh∆∞ nh·ªØng d√≤ng code n√†y. Lu√¥n xinh ƒë·∫πp, m·∫°nh m·∫Ω v√† th√†nh c√¥ng.\n\nC·∫£m ∆°n v√¨ ƒë√£ lu√¥n ·ªü b√™n c·∫°nh t·ªõ.\n\n[END OF TRANSMISSION]\nK√Ω t√™n: Nguy·ªÖn B·∫Øc S∆°n";
        
        let i = 0;
        let t = setInterval(() => {
            txt.innerText = content.substring(0, i) + "‚ñà";
            i++;
            if(i > content.length) clearInterval(t);
        }, 50);
    }

    // --- MAIN LOOP ---
    function animate() {
        requestAnimationFrame(animate);

        // V·∫Ω n·ªÅn Matrix
        if(state !== "BOOT") {
            drawMatrix();
        }

        // V·∫Ω Drones (Text)
        if(state === "SHOW" || state === "LETTER") {
            drones.forEach(d => {
                // Di chuy·ªÉn
                d.x += (d.tx - d.x) * 0.08;
                d.y += (d.ty - d.y) * 0.08;
                
                // V·∫Ω
                ctx.fillStyle = d.color;
                // Hi·ªáu ·ª©ng "Pixel" vu√¥ng v·ª©c cho ƒë√∫ng ch·∫•t hacker
                ctx.fillRect(d.x, d.y, d.size, d.size);
            });
        }
    }
    animate();

</script>
</body>
</html>
