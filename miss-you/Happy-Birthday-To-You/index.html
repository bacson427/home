<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HPBD D∆Ø∆†NG 19 | RED GALAXY</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Black+Ops+One&family=Dancing+Script:wght@700&family=Quicksand:wght@600&display=swap');
        
        body { margin: 0; overflow: hidden; background-color: #020001; font-family: 'Share Tech Mono', monospace; }
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }

        /* --- 1. M√ÄN H√åNH KH√ìA --- */
        #countdown-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #FF4500;
        }
        .matrix-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.15; pointer-events: none; z-index: -1;
            background-image: linear-gradient(0deg, transparent 24%, rgba(255, 0, 0, .3) 25%, rgba(255, 0, 0, .3) 26%, transparent 27%, transparent 74%, rgba(255, 0, 0, .3) 75%, rgba(255, 0, 0, .3) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 0, 0, .3) 25%, rgba(255, 0, 0, .3) 26%, transparent 27%, transparent 74%, rgba(255, 0, 0, .3) 75%, rgba(255, 0, 0, .3) 76%, transparent 77%, transparent);
            background-size: 40px 40px;
        }
        #timer { font-size: clamp(35px, 12vw, 80px); font-weight: bold; text-shadow: 0 0 20px #FF4500; margin: 15px 0; color: #FFD700; letter-spacing: 3px; }
        .lock-text { font-size: 14px; color: #ff6b6b; text-transform: uppercase; letter-spacing: 2px; }
        
        #admin-btn { position: fixed; bottom: 30px; right: 30px; width: 40px; height: 40px; cursor: pointer; z-index: 10001; opacity: 0.5; fill: #FF0000; transition: 0.5s; }
        #admin-btn:hover { opacity: 1; transform: rotate(90deg) scale(1.1); fill: #fff; }

        /* --- 2. N√öT START --- */
        #start-btn-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; justify-content: center; align-items: center; z-index: 2000;
        }
        .cyber-btn {
            background: rgba(50, 0, 0, 0.8); color: #FFD700; border: 2px solid #FF4500;
            padding: 15px 40px; font-size: 18px; cursor: pointer; font-family: 'Black Ops One';
            box-shadow: 0 0 20px #FF4500; border-radius: 50px; animation: pulse 1.5s infinite;
            text-transform: uppercase; letter-spacing: 2px;
        }

        /* --- 3. TERMINAL HACKER --- */
        #virus-terminal { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.95); color: #FF0000; 
            padding: 20px; box-sizing: border-box; font-size: 13px; 
            overflow: hidden; display: none; z-index: 2001;
            text-shadow: 0 0 5px #F00; line-height: 1.5; white-space: pre-wrap;
        }

        /* --- 4. T√ÇM TH∆Ø (S·∫Ω hi·ªán sau Show) --- */
        #msg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); /* N·ªÅn t·ªëi nh·∫π ƒë·ªÉ v·∫´n th·∫•y tim bay ph√≠a sau */
            display: none; z-index: 3000;
            flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 2s;
        }
        #msg-layer.visible { opacity: 1; }
        
        #msg-box {
            width: 85%; max-width: 600px; max-height: 60vh; overflow-y: auto;
            background: rgba(40, 0, 10, 0.85); border: 2px solid #FF1493;
            padding: 25px; border-radius: 20px; 
            box-shadow: 0 0 50px rgba(255, 0, 80, 0.5);
            color: #ffc2d1; font-family: 'Quicksand'; font-size: clamp(16px, 4vw, 20px); 
            line-height: 1.6; white-space: pre-wrap; font-weight: 600;
            backdrop-filter: blur(10px);
        }
        
        #next-btn {
            margin-top: 25px; padding: 12px 35px; border: 2px solid #FFD700;
            background: rgba(0,0,0,0.5); color: #FFD700; border-radius: 30px;
            font-family: 'Black Ops One'; font-size: 16px; cursor: pointer; display: none;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3); animation: pulse 2s infinite;
        }

        /* --- 5. TRANSITION --- */
        #white-flash {
            position: fixed; top:0; left:0; width:100%; height:100%; background: #FFF;
            z-index: 9999; opacity: 0; pointer-events: none; transition: opacity 3s;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }
        .loading-heart { font-size: 60px; animation: beat 0.8s infinite; color: #ff0055;}
        .loading-text { margin-top: 15px; color: #ff0055; font-family: 'Dancing Script'; font-size: 28px; font-weight: bold;}

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes beat { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <canvas id="c"></canvas>

    <div id="countdown-layer">
        <div class="matrix-bg"></div>
        <div style="font-size: 18px; letter-spacing: 4px; color: #fff;">PROJECT: DUONG_19</div>
        <div id="timer">00:00:00</div>
        <div class="lock-text">[ SYSTEM LOCKED ]</div>
        <div class="lock-text" style="color: #666; font-size: 10px; margin-top: 5px;">TARGET: 01/03/2026</div>
        <div id="admin-btn" onclick="adminUnlock()">
            <svg viewBox="0 0 24 24"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
        </div>
    </div>

    <div id="start-btn-container">
        <button class="cyber-btn" onclick="startShow()">K√çCH HO·∫†T H·ªÜ TH·ªêNG</button>
    </div>

    <div id="virus-terminal"></div>

    <div id="msg-layer">
        <div style="color: #FFD700; font-size: 30px; font-family: 'Dancing Script'; margin-bottom: 15px; text-shadow: 0 0 10px #FFD700;">üíå Th∆∞ G·ª≠i D∆∞∆°ng</div>
        <div id="msg-box"></div>
        <button id="next-btn" onclick="doTransition()">XEM ƒêI·ªÄU B·∫§T NG·ªú >></button>
    </div>

    <div id="white-flash">
        <div class="loading-heart">‚ù§Ô∏è</div>
        <div class="loading-text">Ch·ªù t·ªõ m·ªôt ch√∫t...</div>
    </div>

    <audio id="audio" src="https://nguyenbacson.io.vn/miss-you-happy-birthday.mp3" loop></audio>

<script>
    // --- C·∫§U H√åNH ---
    const TARGET_DATE = new Date("March 1, 2026 00:00:00").getTime();
    const PASS = "01032007";
    
    // N·ªòI DUNG T√ÇM TH∆Ø
    const LETTER = `Ch√∫c m·ª´ng sinh nh·∫≠t tu·ªïi 19, c√¥ g√°i H√† Nam xinh ƒë·∫πp! üéÇ

Ch√∫c c√¥ sinh vi√™n ƒê·∫°i h·ªçc Ph∆∞∆°ng ƒê√¥ng sang tu·ªïi m·ªõi h·ªçc t·∫≠p th·∫≠t t·ªët, lu√¥n vui v·∫ª v√† b·ªõt suy nghƒ© linh tinh nh√©.

D√π c√≥ b·∫≠n deadline th√¨ c≈©ng nh·ªõ ƒÉn u·ªëng ƒë·∫ßy ƒë·ªß (ƒë·∫∑c bi·ªát l√† ƒëi ƒÉn nem n∆∞·ªõng cho ƒë·ª° th√®m nha). üç¢

Mong r·∫±ng m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi c·∫≠u. Happy Birthday, my special girl! ‚ù§Ô∏è

-- Nguy·ªÖn B·∫Øc S∆°n --`;

    const TERMINAL_LOGS = [
        "> CONNECTING_TO_RED_SERVER...", "> TARGET_FOUND: 'TRUONG_THI_DUONG'", 
        "> LOCATION: HA_NAM", "> STATUS: CUTE_LEVEL_MAX", 
        "> DECRYPTING_GIFT...", "> 3...", "> 2...", "> 1...", "> START_DRONE_SHOW!"
    ];

    // N·ªòI DUNG SHOW DI·ªÑN (Ch·∫°y TR∆Ø·ªöC t√¢m th∆∞)
    const DRONE_SEQUENCE = [
        { t: 1000, txt: "üéâCH√öC M·ª™NGüéâ", color: "hsla(350, 100%, 60%, 1)", font: 'Black Ops One' },
        { t: 6000, txt: "SINH NH·∫¨T", color: "hsla(45, 100%, 60%, 1)", font: 'Black Ops One' },
        { t: 11000, txt: "D∆Ø∆†NG 19", color: "hsla(320, 100%, 60%, 1)", font: 'Black Ops One' },
        { t: 16000, shp: "HEART", color: "hsla(350, 100%, 60%, 1)" },
        { t: 21000, txt: "XINH ƒê·∫∏P", color: "hsla(45, 100%, 60%, 1)", font: 'Dancing Script' },
        { t: 26000, txt: "H·∫†NH PH√öC", color: "hsla(320, 100%, 60%, 1)", font: 'Dancing Script' },
        { t: 32000, action: "SHOW_LETTER" } // K·∫øt th√∫c show -> Hi·ªán th∆∞
    ];

    // --- CANVAS SETUP ---
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    let w, h;
    let stars = [], drones = []; 
    let state = "LOCK"; 
    const DOT_GAP = 4;

    function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        stars = [];
        for(let i=0; i<150; i++) stars.push({
            x: Math.random()*w, y: Math.random()*h, 
            s: Math.random()*1.5, a: Math.random(),
            blink: Math.random() * 0.05
        });
    }
    window.addEventListener('resize', resize);
    resize();

    function createDrone(x, y) {
        return { 
            x: x || Math.random()*w, y: y || h+100, 
            tx: Math.random()*w, ty: Math.random()*h, 
            color: 'white', size: 2, active: false 
        };
    }

    // --- COUNTDOWN ---
    function updateTimer() {
        const now = new Date().getTime();
        const dis = TARGET_DATE - now;
        if(dis < 0) { unlock(); return; }
        const d = Math.floor(dis / (86400000));
        const ho = Math.floor((dis % 86400000) / 3600000);
        const mi = Math.floor((dis % 3600000) / 60000);
        const se = Math.floor((dis % 60000) / 1000);
        document.getElementById("timer").innerText = 
            `${d<10?"0"+d:d}:${ho<10?"0"+ho:ho}:${mi<10?"0"+mi:mi}:${se<10?"0"+se:se}`;
    }
    let tmr = setInterval(updateTimer, 1000);
    updateTimer();

    function unlock() {
        clearInterval(tmr);
        document.getElementById("countdown-layer").style.display = "none";
        document.getElementById("start-btn-container").style.display = "flex";
        state = "IDLE";
    }

    window.adminUnlock = function() {
        if(prompt("PASS ADMIN:") == PASS) unlock(); else alert("SAI M·∫¨T KH·∫®U!");
    }

    // --- FLOW ---
    window.startShow = function() {
        document.getElementById("start-btn-container").style.display = "none";
        document.getElementById("audio").play().catch(()=>{});
        runVirus();
    }

    // B∆Ø·ªöC 1: TERMINAL
    function runVirus() {
        state = "VIRUS";
        const term = document.getElementById("virus-terminal");
        term.style.display = "block";
        let line = 0, char = 0, txt = "";
        
        function type() {
            if(line >= TERMINAL_LOGS.length) {
                // H·∫øt l·ªánh hack -> Chuy·ªÉn sang DRONE SHOW ngay
                setTimeout(() => { term.style.display = "none"; startDroneShow(); }, 800);
                return;
            }
            const str = TERMINAL_LOGS[line];
            term.innerHTML = txt + str.substring(0, char) + "_";
            term.scrollTop = term.scrollHeight;
            if(char < str.length) { char++; setTimeout(type, 20); }
            else { txt += str + "<br>"; line++; char=0; setTimeout(type, 100); }
        }
        type();
    }

    // B∆Ø·ªöC 2: DRONE SHOW
    window.startDroneShow = function() {
        state = "DRONE";
        // B·∫Øt ƒë·∫ßu ch·∫°y k·ªãch b·∫£n
        DRONE_SEQUENCE.forEach(s => {
            setTimeout(() => {
                if(s.action === "SHOW_LETTER") { showMessage(); return; }
                if(s.txt) formText(s.txt, s.color, s.font);
                if(s.shp) formShape(s.shp, s.color);
            }, s.t);
        });
    }

    // B∆Ø·ªöC 3: HI·ªÜN T√ÇM TH∆Ø
    function showMessage() {
        state = "MSG";
        // Gi·ªØ h√¨nh tr√°i tim cu·ªëi c√πng c·ªßa Drone l√†m n·ªÅn, kh√¥ng x√≥a canvas
        const layer = document.getElementById("msg-layer");
        layer.style.display = "flex";
        setTimeout(() => layer.classList.add("visible"), 50);
        
        const box = document.getElementById("msg-box");
        let i = 0;
        let t = setInterval(() => {
            box.innerText = LETTER.substring(0, i) + "|";
            box.scrollTop = box.scrollHeight;
            if(i >= LETTER.length) {
                clearInterval(t);
                box.innerText = LETTER;
                document.getElementById("next-btn").style.display = "block"; // Hi·ªán n√∫t chuy·ªÉn trang
            }
            i++;
        }, 30);
    }

    // B∆Ø·ªöC 4: CHUY·ªÇN TRANG
    window.doTransition = function() {
        // H√∫t c√°c h·∫°t Drone v·ªÅ t√¢m t·∫°o hi·ªáu ·ª©ng Warp
        drones.forEach(d => { d.tx = w/2; d.ty = h/2; });
        
        const white = document.getElementById("white-flash");
        white.style.opacity = 1;
        setTimeout(() => {
            window.location.href = "https://nguyenbacson.io.vn/miss-you/i-love-you/";
        }, 3000);
    }

    // --- LOGIC X·∫æP H√åNH ---
    function formText(text, color, font) {
        const tmp = document.createElement('canvas');
        const tCtx = tmp.getContext('2d');
        let fSize = Math.min(w / (text.length * 0.7), 100); 
        if(w < 500) fSize = Math.min(w / (text.length * 0.6), 60);

        tCtx.font = `900 ${fSize}px "${font}"`;
        let measure = tCtx.measureText(text);
        tmp.width = measure.width + 20; tmp.height = fSize * 1.5;
        
        tCtx.font = `900 ${fSize}px "${font}"`; tCtx.fillStyle = 'white';
        tCtx.textAlign = 'center'; tCtx.textBaseline = 'middle';
        tCtx.fillText(text, tmp.width/2, tmp.height/2);
        processPixels(tmp, color);
    }

    function formShape(type, color) {
        let points = [], cx = w/2, cy = h/2, size = Math.min(w, h) * 0.35;
        if(type === "HEART") {
            for(let i=0; i<1000; i++) {
                let t = (i/1000) * Math.PI*2;
                let x = 16 * Math.pow(Math.sin(t), 3);
                let y = -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t));
                points.push({x: cx + x*(size/18), y: cy + y*(size/18)});
            }
        }
        updateDrones(points, color);
    }

    function processPixels(canvas, color) {
        const data = canvas.getContext('2d').getImageData(0,0, canvas.width, canvas.height).data;
        let points = [];
        let startX = (w - canvas.width)/2;
        let startY = (h - canvas.height)/2;
        for(let y=0; y<canvas.height; y+=DOT_GAP) {
            for(let x=0; x<canvas.width; x+=DOT_GAP) {
                if(data[(y*canvas.width + x)*4 + 3] > 128) points.push({x: startX + x, y: startY + y});
            }
        }
        updateDrones(points, color);
    }

    function updateDrones(points, color) {
        if(drones.length > points.length) drones.splice(points.length).forEach(d => d.active = false);
        while(drones.length < points.length) drones.push(createDrone());
        drones.forEach((d, i) => {
            if(i < points.length) { d.tx = points[i].x; d.ty = points[i].y; d.color = color; d.active = true; } 
            else { d.tx = Math.random()*w; d.ty = h + 100; d.active = false; }
        });
    }

    // --- ANIMATION LOOP ---
    function loop() {
        ctx.fillStyle = "rgba(10, 0, 5, 0.25)"; ctx.fillRect(0,0,w,h);

        stars.forEach(s => {
            s.a += s.blink; if(s.a > 1 || s.a < 0.2) s.blink *= -1;
            ctx.fillStyle = `rgba(255, 200, 200, ${s.a})`;
            ctx.beginPath(); ctx.arc(s.x, s.y, s.s, 0, Math.PI*2); ctx.fill();
        });

        if(state === "DRONE" || state === "MSG") {
            ctx.globalCompositeOperation = 'lighter';
            drones.forEach(d => {
                d.x += (d.tx - d.x) * 0.08; d.y += (d.ty - d.y) * 0.08;
                if(d.active || Math.abs(d.y - d.ty) > 1) {
                    ctx.fillStyle = d.color;
                    ctx.beginPath(); ctx.arc(d.x, d.y, 1.5, 0, Math.PI*2); ctx.fill();
                }
            });
            ctx.globalCompositeOperation = 'source-over';
        }
        requestAnimationFrame(loop);
    }
    loop();

</script>
</body>
</html>
