<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Miss You</title>

    <meta property="og:title" content="Miss You - Nguy·ªÖn B·∫Øc S∆°n">
    <meta property="og:description" content="Nh·∫•p ƒë·ªÉ xem chi ti·∫øt ‚ù§Ô∏è">
    <meta property="og:image" content="https://nguyenbacson.io.vn/miss-you.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nguyenbacson.io.vn/miss-you/">

    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@600;700&display=swap" rel="stylesheet">

    <style>
        /* --- CSS C∆† B·∫¢N & T·ªêI ∆ØU --- */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-user-select: none; user-select: none; }

        body {
            /* N·ªÅn Gradient h·ªìng nh·∫π nh√†ng, kh√¥ng d√πng h√¨nh ·∫£nh n·∫∑ng ƒë·ªÉ gi·∫£m t·∫£i */
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); 
            background: radial-gradient(circle, #ffdde1 0%, #ee9ca7 100%);
            height: 100vh;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Quicksand', sans-serif; overflow: hidden; position: relative;
            color: #5d4e60; /* M√†u ch·ªØ x√°m t√≠m sang tr·ªçng d·ªÖ ƒë·ªçc */
        }

        /* --- BACKGROUND BLOBS (T·ªêI ∆ØU H√ìA) --- */
        /* Gi·∫£m ƒë·ªô Blur ƒë·ªÉ ƒë·ª° lag tr√™n mobile */
        .bg-blobs-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; overflow: hidden; }
        .blob { position: absolute; border-radius: 50%; filter: blur(40px); opacity: 0.6; will-change: transform; }
        
        .blob-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: #ff9a9e; animation: move1 20s infinite alternate; }
        .blob-2 { bottom: -10%; right: -10%; width: 60vw; height: 60vw; background: #fad0c4; animation: move2 25s infinite alternate; }
        .blob-3 { top: 40%; left: 40%; width: 30vw; height: 30vw; background: #ffd1ff; animation: move3 30s infinite alternate; opacity: 0.4; }

        @keyframes move1 { from { transform: translate(0,0); } to { transform: translate(20px, 40px) scale(1.1); } }
        @keyframes move2 { from { transform: translate(0,0); } to { transform: translate(-30px, -20px) scale(0.9); } }
        @keyframes move3 { from { transform: translate(0,0); } to { transform: translate(20px, -40px); } }

        /* --- CANVAS PH√ÅO HOA --- */
        #fireworksCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; pointer-events: none; }

        /* --- CONTAINER K√çNH M·ªú --- */
        .container {
            text-align: center; 
            background: rgba(255, 255, 255, 0.25); /* K√≠nh trong su·ªët s√°ng */
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            padding: 30px 25px; border-radius: 30px; 
            box-shadow: 0 15px 35px rgba(255, 107, 129, 0.2); 
            max-width: 500px; width: 90%; 
            border: 2px solid rgba(255, 255, 255, 0.6);
            animation: float 6s ease-in-out infinite; position: relative; z-index: 10; 
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* --- TIM ƒê·∫¨P --- */
        .heart-container { display: flex; justify-content: center; gap: 20px; margin-bottom: 10px; }
        .heart-icon { font-size: 50px; filter: drop-shadow(0 0 5px rgba(255, 71, 87, 0.5)); animation: beat 1.2s infinite; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        h1 { font-family: 'Dancing Script', cursive; font-size: 2.8rem; margin-bottom: 15px; color: #d63384; text-shadow: 2px 2px 0px rgba(255,255,255,0.5); }

        /* --- ƒê·ªíNG H·ªí --- */
        #clock { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .time-box { 
            background: rgba(255, 255, 255, 0.5); 
            padding: 10px; border-radius: 15px; min-width: 65px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); 
            border: 1px solid rgba(255,255,255,0.8);
        }
        .time-box span { font-size: 1.8rem; font-weight: 800; color: #ff6b81; display: block; line-height: 1; }
        .time-box p { font-size: 0.75rem; color: #888; font-weight: 700; margin-top: 5px; text-transform: uppercase; }

        .date-start { 
            font-size: 1.1rem; font-weight: 700; color: #fff; 
            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
            padding: 8px 25px; border-radius: 50px; 
            margin-bottom: 15px; display: inline-block;
            box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
        }
        
        audio { width: 100%; height: 35px; margin-top: 5px; border-radius: 20px; opacity: 0.9; outline: none; }

        /* --- N√öT NEW YEAR --- */
        .new-year-box {
            display: inline-block; margin-top: 15px;
            background: linear-gradient(135deg, #ff6b81 0%, #ff4757 100%);
            color: white; font-weight: bold; font-size: 1.1rem;
            padding: 12px 30px; border-radius: 50px; text-decoration: none;
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.4);
            transition: transform 0.2s;
        }
        .new-year-box:active { transform: scale(0.95); }
        .new-year-box::before { content: 'üéâ'; margin-right: 5px; }

        .copyright { margin-top: 15px; font-size: 0.8rem; color: #888; }
        .hint { margin-top: 5px; font-size: 0.8rem; color: #d63384; font-weight: bold; animation: fade 2s infinite; }
        @keyframes fade { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

        /* --- ELEMENTS PH·ª§ --- */
        .box-heart { position: absolute; left: 50%; bottom: 10px; transform: translateX(-50%); font-size: 20px; pointer-events: none; animation: floatUpBox 1.5s forwards; }
        @keyframes floatUpBox { to { bottom: 150%; opacity: 0; transform: translateX(calc(-50% + var(--tx))) rotate(var(--rot)); } }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            h1 { font-size: 2.2rem; }
            .container { padding: 20px 15px; width: 95%; }
            .time-box { min-width: 55px; padding: 8px; }
            .time-box span { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="bg-blobs-container">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <canvas id="fireworksCanvas"></canvas>

    <div class="container">
        <div class="heart-container">
            <div class="heart-icon">üíï</div>
            <div class="heart-icon">üíû</div>
        </div>

        <h1>Ch√∫ng m√¨nh ƒë√£ quen nhau</h1>
        <div id="clock">
            <div class="time-box" id="box-days"> <span id="days">00</span> <p>Ng√†y</p> </div>
            <div class="time-box" id="box-hours"> <span id="hours">00</span> <p>Gi·ªù</p> </div>
            <div class="time-box" id="box-minutes"> <span id="minutes">00</span> <p>Ph√∫t</p> </div>
            <div class="time-box" id="box-seconds"> <span id="seconds">00</span> <p>Gi√¢y</p> </div>
        </div>

        <p class="date-start">10:50 - 24/12/2025</p>

        <audio id="myAudio" controls loop autoplay>
            <source src="https://nguyenbacson.io.vn/nguyenbacson-missyou.mp3" type="audio/mpeg">
        </audio>
        
        <a href="https://nguyenbacson.io.vn/happynewyear-your/" target="_blank" class="new-year-box">
            CH√öC M·ª™NG NƒÇM M·ªöI
        </a>

        <p class="copyright">G·∫∑p Em ƒê√∫ng L√∫c</p>
        <p class="hint">( Nh·∫•p 2 l·∫ßn v√†o m√†n h√¨nh ƒë·ªÉ th·∫£ tim )</p>
    </div>

    <script>
        /* --- 1. CANVAS PH√ÅO HOA T·ªêI ∆ØU (LIGHTER MODE) --- */
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y;
                this.color = color;
                // T·∫°o ƒë·ªô t·ªèa ng·∫´u nhi√™n
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3 + 1; // T·ªëc ƒë·ªô v·ª´a ph·∫£i
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.015; // Tan bi·∫øn ch·∫≠m
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.05; // Tr·ªçng l·ª±c nh·∫π
                this.alpha -= this.decay;
            }
            draw() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2); // H·∫°t tr√≤n to h∆°n x√≠u cho ƒë·∫πp
                ctx.fill();
            }
        }

        /* T·∫†O H√åNH TR√ÅI TIM ƒê·∫∏P & CHU·∫®N X√ÅC */
        function createHeartExplosion(x, y) {
            const colors = ['#ff4757', '#ff6b81', '#ff7f50', '#ffffff', '#ffcccb'];
            const points = 60; // S·ªë l∆∞·ª£ng h·∫°t v·ª´a ƒë·ªß ƒë·ªÉ kh√¥ng lag
            
            for (let i = 0; i < points; i++) {
                // C√¥ng th·ª©c h√¨nh tr√°i tim chu·∫©n
                const t = (Math.PI * 2 * i) / points;
                const heartX = 16 * Math.pow(Math.sin(t), 3);
                const heartY = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                
                // Scale ƒë·ªô to c·ªßa tim
                const scale = 3.5; 
                
                const p = new Particle(x, y, colors[Math.floor(Math.random() * colors.length)]);
                
                // G√°n v·∫≠n t·ªëc theo h∆∞·ªõng h√¨nh tim ƒë·ªÉ n·ªï ra ƒë√∫ng h√¨nh
                p.vx = heartX * 0.15 + (Math.random() - 0.5); 
                p.vy = heartY * 0.15 + (Math.random() - 0.5);
                p.x = x + heartX * scale; // V·ªã tr√≠ xu·∫•t ph√°t ƒë√£ l√† h√¨nh tim
                p.y = y + heartY * scale;
                p.decay = 0.02; // Tan bi·∫øn ƒë·ªìng ƒë·ªÅu
                
                particles.push(p);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            // X√≥a canvas theo ki·ªÉu fade nh·∫π (t·∫°o v·ªát m·ªù ƒë·∫πp) nh∆∞ng x√≥a s·∫°ch ƒë·ªÉ t·ªëi ∆∞u
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Ch·∫ø ƒë·ªô h√≤a tr·ªôn gi√∫p ph√°o hoa ph√°t s√°ng r·ª±c r·ª°
            ctx.globalCompositeOperation = 'lighter';

            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].alpha <= 0) particles.splice(i, 1);
            }
            ctx.globalCompositeOperation = 'source-over'; // Tr·∫£ v·ªÅ m·∫∑c ƒë·ªãnh
        }
        animate();


        /* --- 2. ƒê·∫æM NG√ÄY & LOGIC 30S --- */
        const startDate = new Date(2025, 11, 24, 10, 50, 0).getTime();
        let lastSecond = -1;

        function updateCounter() {
            const now = new Date().getTime();
            const dist = now - startDate;
            if (dist < 0) return;

            const days = Math.floor(dist / (1000 * 60 * 60 * 24));
            const hours = Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((dist % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((dist % (1000 * 60)) / 1000);

            document.getElementById("days").innerText = days;
            document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
            document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
            document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');

            // --- K√çCH HO·∫†T PH√ÅO HOA T·∫†I 00 v√† 30 ---
            if ((seconds === 0 || seconds === 30) && seconds !== lastSecond) {
                // B·∫Øn 2 tr√°i tim ·ªü 2 b√™n cho c√¢n ƒë·ªëi
                createHeartExplosion(window.innerWidth / 2 - 80, window.innerHeight / 3);
                createHeartExplosion(window.innerWidth / 2 + 80, window.innerHeight / 3);
                lastSecond = seconds;
            }
            if (seconds !== 0 && seconds !== 30) lastSecond = -1;

            // Hi·ªáu ·ª©ng tim bay nh·ªè t·ª´ √¥ s·ªë
            spawnBoxHeart('box-seconds', '‚ù§Ô∏è');
        }

        function spawnBoxHeart(id, icon) {
            const box = document.getElementById(id);
            if(Math.random() > 0.3) return; // Gi·∫£m t·∫ßn su·∫•t spawn ƒë·ªÉ ƒë·ª° lag
            
            const heart = document.createElement('div');
            heart.className = 'box-heart';
            heart.innerText = icon;
            // Random h∆∞·ªõng bay
            heart.style.setProperty('--tx', (Math.random()*40 - 20) + 'px');
            heart.style.setProperty('--rot', (Math.random()*60 - 30) + 'deg');
            heart.style.color = `hsl(${Math.random()*360}, 70%, 70%)`; // M√†u random pastel
            box.appendChild(heart);
            setTimeout(() => heart.remove(), 1500);
        }

        setInterval(updateCounter, 1000);
        updateCounter();


        /* --- 3. DOUBLE CLICK TH·∫¢ TIM --- */
        document.addEventListener('dblclick', (e) => spawnClickHeart(e.clientX, e.clientY));
        
        function spawnClickHeart(x, y) {
            const h = document.createElement('div');
            h.innerText = 'üíñ';
            h.style.position = 'fixed';
            h.style.left = x + 'px';
            h.style.top = y + 'px';
            h.style.fontSize = '30px';
            h.style.pointerEvents = 'none';
            h.style.animation = 'floatUpBox 1s ease-out forwards';
            h.style.setProperty('--tx', '0px');
            h.style.setProperty('--rot', '0deg');
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 1000);
        }

        /* T·ª± ƒë·ªông ph√°t nh·∫°c khi click b·∫•t k·ª≥ */
        document.body.addEventListener('click', () => {
            const audio = document.getElementById('myAudio');
            if(audio.paused) audio.play();
        }, { once: true });

    </script>
</body>
</html>
