<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Rain (Giải mã)</title>
    
    <style>
        /* Đảm bảo không có viền trắng hay thanh cuộn */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Ẩn thanh cuộn */
            background-color: #000; /* Nền đen tuyền */
        }

        /* Đảm bảo canvas nằm đúng vị trí */
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>

    <script>
        // Lấy phần tử canvas từ HTML
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        // Thiết lập canvas lấp đầy màn hình
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Chuỗi ký tự sẽ rơi (Chỉ dùng chữ La Tinh và số)
        const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'; // Chữ cái La Tinh
        const nums = '0123456789'; // Số
        const alphabet = latin + nums; // Kết hợp cả chữ và số

        // Thiết lập kích thước font
        const fontSize = 16;

        // --- CÀI ĐẶT CHO HIỆU ỨNG DỌC ---
        let columns = Math.floor(canvas.width / fontSize);
        const drops = []; // Mảng cho các giọt mưa DỌC
        for (let x = 0; x < columns; x++) {
            drops[x] = 1; 
        }

        // --- CÀI ĐẶT CHO HIỆU ỨNG NGANG ---
        let horizontalRows = Math.floor(canvas.height / fontSize);
        const horizontalDrops = []; // Mảng cho các giọt mưa NGANG
        for (let y = 0; y < horizontalRows; y++) {
            horizontalDrops[y] = Math.random() * -canvas.width; 
        }

        // Hàm vẽ chính
        function draw() {
            // 1. Làm mờ màn hình (tạo hiệu ứng đuôi mờ dần)
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 2. Thiết lập màu và font chữ cho các ký tự rơi
            ctx.fillStyle = '#0F0'; // Màu xanh lá cây
            ctx.font = fontSize + 'px monospace';
            ctx.textAlign = 'left'; // Reset căn lề

            // --- VẼ HIỆU ỨNG DỌC ---
            for (let i = 0; i < drops.length; i++) {
                const text = alphabet[Math.floor(Math.random() * alphabet.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                drops[i]++;
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0; 
                }
            }

            // --- VẼ HIỆU ỨNG NGANG ---
            for (let j = 0; j < horizontalDrops.length; j++) {
                if (j % 3 !== 0) continue; // Giảm số lượng hàng ngang cho đỡ rối

                const text = alphabet[Math.floor(Math.random() * alphabet.length)];
                ctx.fillText(text, horizontalDrops[j] * fontSize, j * fontSize);
                horizontalDrops[j]++;
                if (horizontalDrops[j] * fontSize > canvas.width && Math.random() > 0.975) {
                    horizontalDrops[j] = 0; 
                }
            }
        }

        // Chạy hàm draw lặp đi lặp lại (hiệu ứng mưa)
        setInterval(draw, 33); // Khoảng 30fps

        // *** PHẦN LẶP LẠI MỖI 1.5 PHÚT (ĐÃ CẬP NHẬT) ***
        setInterval(() => {
            ctx.textAlign = 'center'; // Căn chữ ra giữa
            const midY = canvas.height / 2; // Tìm điểm giữa chiều dọc

            // Dòng 1 (Trang web)
            ctx.fillStyle = '#FFF'; // Màu trắng
            ctx.font = '30px monospace';
            ctx.fillText('nguyenbacson.io.vn', canvas.width / 2, midY - 35);

            // Dòng 2 (Tên)
            ctx.fillStyle = '#FFF'; // Màu trắng
            ctx.font = '30px monospace';
            ctx.fillText('Nguyen Bac Son - My Bio', canvas.width / 2, midY);

            // Dòng 3 (Mật mã) - MỚI
            ctx.fillStyle = '#0F0'; // Màu xanh lá
            ctx.font = '24px monospace'; // Cỡ chữ nhỏ hơn
            ctx.fillText('Giải mã: 04022007', canvas.width / 2, midY + 35);

        }, 90000); // 90,000 milliseconds = 1.5 phút

        // Cập nhật kích thước canvas nếu người dùng thay đổi kích thước cửa sổ
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Cập nhật cho CỘT DỌC
            let oldColumns = columns;
            columns = Math.floor(canvas.width / fontSize);
            if (columns > oldColumns) {
                for (let x = oldColumns; x < columns; x++) {
                    drops[x] = 1;
                }
            } else {
                drops.length = columns;
            }

            // Cập nhật cho HÀNG NGANG
            let oldRows = horizontalRows;
            horizontalRows = Math.floor(canvas.height / fontSize);
            if (horizontalRows > oldRows) {
                for (let y = oldRows; y < horizontalRows; y++) {
                    horizontalDrops[y] = Math.random() * -canvas.width;
                }
            } else {
                horizontalDrops.length = horizontalRows;
            }
        });
    </script>
</body>
</html>
