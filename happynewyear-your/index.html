<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026 - Truong Thi Duong</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #050505;
            background-image: radial-gradient(circle at center, #1a0b00 0%, #000000 100%);
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            animation: bgShift 20s infinite alternate;
        }

        @keyframes bgShift {
            0% { background-image: radial-gradient(circle at center, #1a0b00 0%, #000000 100%); }
            50% { background-image: radial-gradient(circle at center, #0b001a 0%, #000000 100%); }
            100% { background-image: radial-gradient(circle at center, #000b1a 0%, #000000 100%); }
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* --- DRONE LED EFFECT --- */
        #drone-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            z-index: 2;
            pointer-events: none;
            display: none; /* Hi·ªán khi b·∫Øt ƒë·∫ßu show */
            opacity: 0;
            transition: opacity 2s ease;
        }

        .drone-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-style: preserve-3d;
            border-radius: 50%;
        }

        /* V√≤ng ngo√†i: Ch√∫c M·ª´ng NƒÉm M·ªõi */
        #ring-outer {
            animation: rotateRight 25s linear infinite;
        }

        /* V√≤ng trong: T√™n */
        #ring-inner {
            animation: rotateLeft 20s linear infinite;
        }

        .drone-char {
            position: absolute;
            top: 50%;
            left: 50%;
            color: #fff;
            font-weight: bold;
            font-size: 24px;
            text-align: center;
            white-space: nowrap;
            text-shadow: 
                0 0 5px #fff,
                0 0 10px #ff00de,
                0 0 20px #ff00de;
        }

        .inner-char {
            color: #ffcc00;
            font-size: 30px;
            text-shadow: 
                0 0 5px #fff,
                0 0 10px #ff9900,
                0 0 20px #ff9900;
        }

        @keyframes rotateRight {
            from { transform: translate(-50%, -50%) rotateZ(0deg); }
            to { transform: translate(-50%, -50%) rotateZ(360deg); }
        }

        @keyframes rotateLeft {
            from { transform: translate(-50%, -50%) rotateZ(360deg); }
            to { transform: translate(-50%, -50%) rotateZ(0deg); }
        }

        @media (max-width: 600px) {
            .drone-char { font-size: 14px; }
            .inner-char { font-size: 18px; }
        }

        /* --- C√ÅC PH·∫¶N KH√ÅC (GI·ªÆ NGUY√äN HO·∫∂C CH·ªàNH NH·∫∏) --- */
        #lucky-money-link {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 50px;
            text-decoration: none;
            z-index: 1000;
            transition:all 0.5s ease;
            cursor: pointer;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }
        #lucky-money-link:hover { transform: scale(1.2) rotate(-10deg) !important; }
        #lucky-money-link.show { opacity: 1; transform: translateY(0); pointer-events: auto; }

        /* Overlay */
        #overlay, #countdown-overlay, #password-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 999;
        }

        #overlay { background: rgba(0,0,0,0.85); color: white; cursor: pointer; transition: opacity 1s ease; }
        #overlay h1 { color: #ffcc00; text-shadow: 0 0 20px #ff6600; animation: pulse 1.5s infinite; }
        
        #countdown-overlay { background: rgba(0,0,0,0.95); z-index: 1001; color: white; text-align: center; }
        #countdown-title { color: #ffcc00; font-size: 28px; margin-bottom: 20px; text-shadow: 0 0 10px #ff9900; }
        #countdown-timer { font-size: 40px; color: #00ffaa; display: flex; gap: 10px; justify-content: center; }
        .time-unit { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; min-width: 70px; }
        .time-label { font-size: 12px; color: #ccc; display: block; margin-top: 5px; }

        #password-modal { background: rgba(0,0,0,0.9); z-index: 1003; display: none; }
        .modal-content { background: #1a1a1a; padding: 30px; border-radius: 15px; border: 1px solid #ffcc00; text-align: center; }
        #password-input { padding: 10px; font-size: 16px; margin: 15px 0; background: #333; border: 1px solid #555; color: white; text-align: center; width: 80%; }
        
        #admin-bypass { position: fixed; bottom: 20px; left: 20px; z-index: 1002; }
        #admin-btn { background: transparent; color: #555; border: 1px solid #555; padding: 5px 10px; border-radius: 15px; font-size: 10px; }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    </style>
</head>
<body>

<div id="countdown-overlay">
    <div id="countdown-title">üéâ CH·ªú ƒê√ìN 2026 üéâ</div>
    <div id="countdown-timer">
        <div class="time-unit"><div id="days">00</div><span class="time-label">NG√ÄY</span></div>
        <div class="time-unit"><div id="hours">00</div><span class="time-label">GI·ªú</span></div>
        <div class="time-unit"><div id="minutes">00</div><span class="time-label">PH√öT</span></div>
        <div class="time-unit"><div id="seconds">00</div><span class="time-label">GI√ÇY</span></div>
    </div>
    <p style="color:#888; margin-top:20px;">Giao Th·ª´a: 17/02/2026</p>
</div>

<div id="password-modal">
    <div class="modal-content">
        <h3 style="color: #ffcc00;">Admin Access</h3>
        <input type="password" id="password-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
        <br>
        <button onclick="checkPassword()" style="padding: 8px 20px; background: #ffcc00; border: none; font-weight: bold; cursor: pointer;">OK</button>
        <button onclick="closePasswordModal()" style="padding: 8px 20px; background: #555; color: white; border: none; cursor: pointer;">H·ªßy</button>
    </div>
</div>

<div id="admin-bypass"><button id="admin-btn" onclick="showPasswordModal()">Admin</button></div>

<div id="overlay" style="display: none;">
    <h1>‚ú® G·ª≠i: Tr∆∞∆°ng Th·ªã D∆∞∆°ng ‚ú®</h1>
    <p>(Ch·∫°m ƒë·ªÉ b·∫Øt ƒë·∫ßu bu·ªïi tr√¨nh di·ªÖn)</p>
</div>

<div id="drone-container">
    <div id="ring-outer" class="drone-ring"></div>
    <div id="ring-inner" class="drone-ring"></div>
</div>

<a href="https://nguyenbacson.io.vn/happynewyear-your/quay-li-xi" id="lucky-money-link" target="_blank" title="Nh·∫≠n L√¨ X√¨">üßß</a>

<canvas id="canvas"></canvas>

<script>
    // --- C·∫§U H√åNH & BI·∫æN ---
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const overlay = document.getElementById('overlay');
    const droneContainer = document.getElementById('drone-container');
    const countdownOverlay = document.getElementById('countdown-overlay');
    
    // Resize canvas
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let fireworks = [];
    let particles = [];
    let isPlaying = false;
    let currentStage = -1;
    let targetDate = new Date('2026-02-17T00:00:00').getTime();
    let countdownInterval;

    // √Çm thanh
    const sounds = {
        launch: new Audio('https://nguyenbacson.io.vn/moi-ban.mp3'),
        short: new Audio('https://nguyenbacson.io.vn/no-ngan.mp3'),
        small: new Audio('https://nguyenbacson.io.vn/chum-be.mp3'),
        big: new Audio('https://nguyenbacson.io.vn/chum-to.mp3'),
        finale: new Audio('https://nguyenbacson.io.vn/chum-dai.mp3')
    };

    // Ch·ªânh volume
    sounds.launch.volume = 0.4; // Ti·∫øng r√≠t v·ª´a ph·∫£i
    sounds.short.volume = 0.6;
    sounds.big.volume = 0.8;
    sounds.finale.volume = 1.0;

    // --- H√ÄM H·ªñ TR·ª¢ ---
    function random(min, max) { return Math.random() * (max - min) + min; }

    function playSound(name) {
        if (!isPlaying) return;
        const s = sounds[name];
        if (s) {
            // N·∫øu l√† finale th√¨ ch∆°i lu√¥n, kh√¥ng clone (ƒë·ªÉ tr√°nh ch·ªìng ti·∫øng qu√° nhi·ªÅu g√¢y lag)
            if (name === 'finale') {
                s.currentTime = 0;
                s.play().catch(()=>{});
            } else {
                const clone = s.cloneNode();
                clone.volume = s.volume;
                clone.play().catch(()=>{});
            }
        }
    }

    // --- T·∫†O CH·ªÆ DRONE (H√åNH TR√íN) ---
    function createDroneText(text, radius, elementId, className) {
        const el = document.getElementById(elementId);
        el.innerHTML = '';
        const chars = text.split('');
        const angleStep = 360 / chars.length;

        chars.forEach((char, index) => {
            const span = document.createElement('span');
            span.innerText = char;
            span.className = className;
            // Xoay t·ª´ng ch·ªØ c√°i ƒë·ªÉ h∆∞·ªõng ra ngo√†i ho·∫∑c ƒë·ª©ng th·∫≥ng
            // ·ªû ƒë√¢y ta xoay container, n√™n ch·ªØ c√°i ch·ªâ c·∫ßn ƒë·∫∑t ƒë√∫ng v·ªã tr√≠ g√≥c
            const angle = index * angleStep;
            
            // T√≠nh to√°n v·ªã tr√≠ tuy·ªát ƒë·ªëi d·ª±a tr√™n g√≥c
            // transform: rotate(angle) translate(radius) rotate(-angle) -> ch·ªØ lu√¥n ƒë·ª©ng th·∫≥ng
            // Ho·∫∑c rotate(angle) translate(radius) -> ch·ªØ xoay theo v√≤ng tr√≤n (ki·ªÉu logo)
            span.style.transform = `rotate(${angle}deg) translate(${radius}px) rotate(90deg)`;
            
            el.appendChild(span);
        });
    }

    // Kh·ªüi t·∫°o text d·ª±a tr√™n m√†n h√¨nh
    const minDim = Math.min(window.innerWidth, window.innerHeight);
    createDroneText("CH√öC M·ª™NG NƒÇM M·ªöI 2026  ‚Ä¢  ", minDim * 0.35, 'ring-outer', 'drone-char');
    createDroneText("TR∆Ø∆†NG TH·ªä D∆Ø∆†NG  ‚Ä¢  ", minDim * 0.2, 'ring-inner', 'drone-char inner-char');

    // --- L·ªöP PH√ÅO HOA ---
    class Firework {
        constructor(x, targetY, type) {
            this.x = x;
            this.y = canvas.height;
            this.startX = x;
            this.targetY = targetY;
            this.type = type;
            this.dead = false;
            
            // B·∫ÆN TH·∫≤NG: X g·∫ßn nh∆∞ kh√¥ng ƒë·ªïi, ch·ªâ rung nh·∫π cho t·ª± nhi√™n
            this.vx = random(-0.5, 0.5); 
            
            // T·ªëc ƒë·ªô bay l√™n
            const speed = random(12, 16);
            this.vy = -speed;
            
            this.hue = random(0, 360);
            this.trail = [];
            
            // √Çm thanh r√≠t khi b·∫Øn l√™n
            playSound('launch');
        }

        update() {
            this.trail.push({x: this.x, y: this.y});
            if (this.trail.length > 5) this.trail.shift();

            this.x += this.vx;
            this.y += this.vy;
            
            // Gi·∫£ l·∫≠p tr·ªçng l·ª±c nh·∫π ƒë·ªÉ ph√°o ch·∫≠m d·∫ßn khi l√™n ƒë·ªânh
            this.vy += 0.2; 

            // ƒêi·ªÅu ki·ªán n·ªï: ƒê·∫°t ƒë·ªô cao ho·∫∑c v·∫≠n t·ªëc v·ªÅ 0 (ƒë·ª©ng y√™n tr√™n ƒë·ªânh)
            if (this.vy >= 0 || this.y <= this.targetY) {
                this.dead = true;
                createExplosion(this.x, this.y, this.type, this.hue);
            }
        }

        draw() {
            ctx.beginPath();
            if(this.trail.length > 0) {
                ctx.moveTo(this.trail[0].x, this.trail[0].y);
            } else {
                ctx.moveTo(this.x, this.y + 10);
            }
            ctx.lineTo(this.x, this.y);
            
            // M√†u n√≤ng ph√°o s√°ng tr·∫Øng v√†ng
            ctx.strokeStyle = `hsl(${this.hue}, 100%, 70%)`;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.stroke();
        }
    }

    class Particle {
        constructor(x, y, hue, type) {
            this.x = x;
            this.y = y;
            this.type = type;
            this.hue = hue;
            this.dead = false;
            this.alpha = 1;
            
            // C·∫•u h√¨nh n·ªï
            const angle = random(0, Math.PI * 2);
            // T·ªëc ƒë·ªô n·ªï t√πy lo·∫°i
            let speed = random(2, 5);
            if (type === 'big') speed = random(5, 10);
            if (type === 'short') speed = random(2, 4);

            this.vx = Math.cos(angle) * speed;
            this.vy = Math.sin(angle) * speed;
            
            this.friction = 0.96; // L·ª±c c·∫£n kh√¥ng kh√≠
            this.gravity = 0.08;  // Tr·ªçng l·ª±c r∆°i xu·ªëng
            this.decay = random(0.01, 0.02); // T·ªëc ƒë·ªô m·ªù
            
            if (type === 'big') {
                this.friction = 0.94;
                this.decay = random(0.008, 0.012); // N·ªï to m·ªù ch·∫≠m h∆°n
                this.sparkle = true; // Hi·ªáu ·ª©ng l·∫•p l√°nh
            }
        }

        update() {
            this.vx *= this.friction;
            this.vy *= this.friction;
            this.vy += this.gravity;
            
            this.x += this.vx;
            this.y += this.vy;
            this.alpha -= this.decay;

            if (this.sparkle && Math.random() < 0.2) {
                this.alpha = 1; // Nh·∫•p nh√°y
            }

            if (this.alpha <= 0) this.dead = true;
        }

        draw() {
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = `hsl(${this.hue}, 100%, 60%)`;
            ctx.beginPath();
            // H·∫°t tr√≤n nh·ªè
            ctx.arc(this.x, this.y, (this.type === 'big' ? 2 : 1.5), 0, Math.PI * 2);
            ctx.fill();
            ctx.globalAlpha = 1;
        }
    }

    function createExplosion(x, y, type, hueBase) {
        // Ch∆°i √¢m thanh n·ªï
        if (type === 'finale') {
            // Finale ƒë√£ b·∫≠t nh·∫°c n·ªÅn, kh√¥ng c·∫ßn sound n·ªï l·∫ª t·∫ª qu√° nhi·ªÅu
        } else {
            playSound(type); // short, small, big
        }

        let count = 30;
        if (type === 'big') count = 80;
        if (type === 'short') count = 20;

        for (let i = 0; i < count; i++) {
            // M√†u s·∫Øc: Ch·ªß ƒë·∫°o + bi·∫øn thi√™n nh·∫π
            const hue = hueBase + random(-20, 20);
            particles.push(new Particle(x, y, hue, type));
        }
    }

    // --- K·ªäCH B·∫¢N SHOW ---
    const stages = ['text_intro', 'single_shots', 'mixed_shots', 'finale'];
    
    function nextStage() {
        if (!isPlaying) return;
        currentStage++;
        if (currentStage >= stages.length) {
             // Loop l·∫°i ph·∫ßn b·∫Øn t·ª± do nh·∫π nh√†ng sau khi h·∫øt finale
             currentStage = 1; 
        }

        const stage = stages[currentStage];
        let duration = 3000;

        if (stage === 'text_intro') {
            // Hi·ªán Drone Text
            droneContainer.style.display = 'block';
            setTimeout(() => { droneContainer.style.opacity = 1; }, 100);
            duration = 5000;
        } 
        else if (stage === 'single_shots') {
            // B·∫Øn l·∫ª t·∫ª, th·∫≥ng ƒë·ª©ng
            let count = 0;
            const interval = setInterval(() => {
                fireworks.push(new Firework(
                    random(canvas.width * 0.2, canvas.width * 0.8), // X
                    random(canvas.height * 0.2, canvas.height * 0.5), // Target Y
                    'short'
                ));
                count++;
                if (count > 5) clearInterval(interval);
            }, 800);
            duration = 6000;
        }
        else if (stage === 'mixed_shots') {
            // B·∫Øn ch√πm to + nh·ªè xen k·∫Ω
            let count = 0;
            const interval = setInterval(() => {
                const type = Math.random() < 0.4 ? 'big' : 'small';
                fireworks.push(new Firework(
                    random(canvas.width * 0.1, canvas.width * 0.9),
                    random(canvas.height * 0.1, canvas.height * 0.4),
                    type
                ));
                count++;
                if (count > 8) clearInterval(interval);
            }, 600);
            duration = 6000;
        }
        else if (stage === 'finale') {
            // M√†n li√™n thanh 25s
            droneContainer.style.opacity = 0; // ·∫®n ch·ªØ ƒëi ƒë·ªÉ t·∫≠p trung ph√°o
            playSound('finale'); // Nh·∫°c n·ªÅn 25s
            
            const endTime = Date.now() + 25000;
            
            const loopFinale = () => {
                if (!isPlaying) return;
                if (Date.now() > endTime) {
                    setTimeout(nextStage, 2000);
                    // Hi·ªán n√∫t l√¨ x√¨
                    document.getElementById('lucky-money-link').classList.add('show');
                    return;
                }
                
                // B·∫Øn li√™n t·ª•c
                if (Math.random() < 0.15) { // T·∫ßn su·∫•t d√†y ƒë·∫∑c
                    const type = Math.random() < 0.5 ? 'big' : 'small';
                    fireworks.push(new Firework(
                        random(0, canvas.width),
                        random(canvas.height * 0.1, canvas.height * 0.6),
                        type
                    ));
                }
                requestAnimationFrame(loopFinale);
            };
            loopFinale();
            return; // Tho√°t ƒë·ªÉ loopFinale t·ª± qu·∫£n l√Ω th·ªùi gian
        }

        setTimeout(nextStage, duration);
    }

    // --- GAME LOOP ---
    function loop() {
        requestAnimationFrame(loop);
        
        // X√≥a m√†n h√¨nh v·ªõi hi·ªáu ·ª©ng m·ªù ƒëu√¥i (trail)
        ctx.globalCompositeOperation = 'destination-out';
        ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; // 0.2 gi√∫p ƒëu√¥i ph√°o kh√¥ng qu√° d√†i, gi·∫£m lag
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.globalCompositeOperation = 'lighter';

        // Update ph√°o
        for (let i = fireworks.length - 1; i >= 0; i--) {
            fireworks[i].update();
            fireworks[i].draw();
            if (fireworks[i].dead) fireworks.splice(i, 1);
        }

        // Update h·∫°t n·ªï
        for (let i = particles.length - 1; i >= 0; i--) {
            particles[i].update();
            particles[i].draw();
            if (particles[i].dead) particles.splice(i, 1);
        }
    }

    // --- S·ª∞ KI·ªÜN ---
    function updateCountdown() {
        const now = new Date().getTime();
        const timeLeft = targetDate - now;

        if (timeLeft <= 0) {
            clearInterval(countdownInterval);
            startShow();
            return;
        }

        document.getElementById('days').innerText = String(Math.floor(timeLeft / (1000 * 60 * 60 * 24))).padStart(2,'0');
        document.getElementById('hours').innerText = String(Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2,'0');
        document.getElementById('minutes').innerText = String(Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60))).padStart(2,'0');
        document.getElementById('seconds').innerText = String(Math.floor((timeLeft % (1000 * 60)) / 1000)).padStart(2,'0');
    }

    function startShow() {
        countdownOverlay.style.display = 'none';
        overlay.style.display = 'flex'; // Hi·ªán n√∫t Start
        document.getElementById('admin-bypass').style.display = 'none';
    }

    overlay.addEventListener('click', () => {
        overlay.style.opacity = 0;
        setTimeout(()=> overlay.style.display = 'none', 1000);
        isPlaying = true;
        
        // Play silent sound to unlock audio context on iOS/Android
        const s = new Audio(); s.play().catch(()=>{});
        
        nextStage();
    });

        // Admin Logic
    function showPasswordModal() { document.getElementById('password-modal').style.display = 'flex'; }
    function closePasswordModal() { document.getElementById('password-modal').style.display = 'none'; }
    function checkPassword() {
        if (document.getElementById('password-input').value === '0347432736') {
            closePasswordModal();
            clearInterval(countdownInterval);
            startShow();
        } else {
            alert('Sai m·∫≠t kh·∫©u!');
        }
    }

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    // Start
    countdownInterval = setInterval(updateCountdown, 1000);
    updateCountdown(); // Run once immediately
    loop();

</script>
</body>
</html>