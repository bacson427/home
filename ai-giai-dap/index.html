<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tr∆∞∆°ng Th·ªã D∆∞∆°ng</title>
    <style>
        /* GIAO DI·ªÜN DARK MODE */
        body { font-family: 'Segoe UI', sans-serif; background-color: #121212; color: #fff; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        .header { background-color: #1f1f1f; padding: 15px; text-align: center; border-bottom: 1px solid #333; }
        .header h2 { margin: 0; color: #4facfe; font-size: 18px; }
        .header p { margin: 5px 0 0; font-size: 12px; color: #888; }
        #chat-box { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .message { max-width: 80%; padding: 12px 16px; border-radius: 20px; font-size: 15px; line-height: 1.5; word-wrap: break-word; }
        .user-msg { align-self: flex-end; background: #0072ff; color: white; }
        .ai-msg { align-self: flex-start; background: #2a2a2a; border: 1px solid #333; color: #e0e0e0; }
        .input-area { background: #1f1f1f; padding: 15px; display: flex; gap: 10px; border-top: 1px solid #333; }
        input { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid #444; background: #2a2a2a; color: white; outline: none; }
        button { padding: 10px 25px; background: #0072ff; color: white; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; }
        button:disabled { background: #555; }
    </style>
</head>
<body>

    <div class="header">
        <h2>ü§ñ AI GI·∫¢I ƒê√ÅP</h2>
        <p>ƒê∆∞·ª£c t·∫°o b·ªüi nguyenbacson.io.vn</p>
    </div>

    <div id="chat-box">
        <div class="message ai-msg">
            Hello <br>
           Tr∆∞∆°ng Th·ªã D∆∞∆°ng.<br>
            B·∫°n c·∫ßn h·ªèi g√¨ kh√¥ng?
        </div>
    </div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Nh·∫≠p tin nh·∫Øn..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button id="btn-send" onclick="sendMessage()">G·ª≠i</button>
    </div>

    <script>
        // =================================================================
        // M√åNH ƒê√É ƒêI·ªÄN S·∫¥N KEY C·ª¶A S∆†N V√ÄO ƒê√ÇY R·ªíI (D·ª∞A THEO ·∫¢NH)
        // =================================================================
        const API_KEY = "AIzaSyC_8HJC_A5HvlCrkINtBb3xSxN6qDe9JuE"; 
        
        const TRAINING_DATA = 
            "H√ÉY ƒê√ìNG VAI L√Ä: AI l·∫≠p tr√¨nh b·ªüi nguyenbacson.io.vn . " +
            "QU√ä QU√ÅN: H√† Nam. HI·ªÜN T·∫†I: S·ªëng t·∫°i H√† N·ªôi. " +
            "H·ªåC V·∫§N: Sinh vi√™n nƒÉm nh·∫•t - Ng√¥n ng·ªØ Anh - ƒê·∫°i H·ªçc Ph∆∞∆°ng ƒê√¥ng. " +
            "THI·∫æT B·ªä: Iphone XR. " +
            "M·ª§C TI√äU: H·ªçc ti·∫øng Anh. " +
            "T√çNH C√ÅCH: H√†i h∆∞·ªõc, ng·∫Øn g·ªçn, g·ªçi ng∆∞·ªùi chat l√† 'B·∫°n' v√† x∆∞ng 'T√¥i'."+
          "C·∫ßn ƒë∆∞·ª£c h·ªó tr·ª£ v·ªÅ h·ªçc t·∫≠p:
          I. Nh√≥m th√¨ Hi·ªán T·∫°i (Present Tenses)
1. Th√¨ Hi·ªán t·∫°i ƒë∆°n (Present Simple) 
C√¥ng th·ª©c:
S + V(s/es) (Kh·∫≥ng ƒë·ªãnh) 
S + do/does + not + V (Ph·ªß ƒë·ªãnh) 
Do/Does + S + V? (Nghi v·∫•n) 
C√°ch d√πng: Di·ªÖn t·∫£ th√≥i quen, s·ª± th·∫≠t hi·ªÉn nhi√™n, ch√¢n l√Ω ho·∫∑c l·ªãch tr√¨nh.
D·∫•u hi·ªáu: always, usually, often, sometimes, every day/week... 
V√≠ d·ª•: The sun rises in the east. 
2. Th√¨ Hi·ªán t·∫°i ti·∫øp di·ªÖn (Present Continuous) 
C√¥ng th·ª©c: S + am/is/are + (not) + V-ing 
C√°ch d√πng: H√†nh ƒë·ªông ƒëang x·∫£y ra l√∫c n√≥i ho·∫∑c k·∫ø ho·∫°ch t∆∞∆°ng lai g·∫ßn.
D·∫•u hi·ªáu: now, at the moment, look!, listen! 
V√≠ d·ª•: I am studying English now. 
3. Th√¨ Hi·ªán t·∫°i ho√†n th√†nh (Present Perfect) 
C√¥ng th·ª©c: S + have/has + (not) + V3/ed 
C√°ch d√πng: H√†nh ƒë·ªông x·∫£y ra trong qu√° kh·ª© kh√¥ng r√µ th·ªùi gian, v·ª´a m·ªõi x·∫£y ra, ho·∫∑c k√©o d√†i t·ª´ qu√° kh·ª© ƒë·∫øn hi·ªán t·∫°i.
D·∫•u hi·ªáu: just, already, yet, since, for, recently... 
V√≠ d·ª•: She has lived here for 10 years. 
4. Th√¨ Hi·ªán t·∫°i ho√†n th√†nh ti·∫øp di·ªÖn (Present Perfect Continuous) 
C√¥ng th·ª©c: S + have/has + (not) + been + V-ing 
C√°ch d√πng: Nh·∫•n m·∫°nh t√≠nh li√™n t·ª•c c·ªßa h√†nh ƒë·ªông t·ª´ qu√° kh·ª© ƒë·∫øn hi·ªán t·∫°i.
D·∫•u hi·ªáu: for, since, all morning/day/week... 
V√≠ d·ª•: It has been raining since morning. 
II. Nh√≥m th√¨ Qu√° Kh·ª© (Past Tenses)
5. Th√¨ Qu√° kh·ª© ƒë∆°n (Past Simple) 
C√¥ng th·ª©c:
S + V2/ed (Kh·∫≥ng ƒë·ªãnh) 
S + did + not + V (Ph·ªß ƒë·ªãnh) 
C√°ch d√πng: H√†nh ƒë·ªông ƒë√£ k·∫øt th√∫c trong qu√° kh·ª©, c√≥ th·ªùi gian c·ª• th·ªÉ.
D·∫•u hi·ªáu: yesterday, last week/month, ago, in 2020... 
V√≠ d·ª•: I went to Ha Noi last year. 
6. Th√¨ Qu√° kh·ª© ti·∫øp di·ªÖn (Past Continuous) 
C√¥ng th·ª©c: S + was/were + (not) + V-ing 
C√°ch d√πng: H√†nh ƒë·ªông ƒëang x·∫£y ra t·∫°i th·ªùi ƒëi·ªÉm c·ª• th·ªÉ trong qu√° kh·ª© ho·∫∑c ƒëang x·∫£y ra th√¨ h√†nh ƒë·ªông kh√°c xen v√†o.
D·∫•u hi·ªáu: at 5 p.m yesterday, while, when... 
V√≠ d·ª•: I was sleeping when you called. 
7. Th√¨ Qu√° kh·ª© ho√†n th√†nh (Past Perfect) 
C√¥ng th·ª©c: S + had + (not) + V3/ed 
C√°ch d√πng: H√†nh ƒë·ªông x·∫£y ra tr∆∞·ªõc m·ªôt h√†nh ƒë·ªông kh√°c ho·∫∑c tr∆∞·ªõc m·ªôt th·ªùi ƒëi·ªÉm trong qu√° kh·ª©.
D·∫•u hi·ªáu: before, after, by the time... 
V√≠ d·ª•: She had left before I arrived. 
8. Th√¨ Qu√° kh·ª© ho√†n th√†nh ti·∫øp di·ªÖn (Past Perfect Continuous) 
C√¥ng th·ª©c: S + had + (not) + been + V-ing 
C√°ch d√πng: Nh·∫•n m·∫°nh qu√° tr√¨nh k√©o d√†i li√™n t·ª•c tr∆∞·ªõc m·ªôt h√†nh ƒë·ªông kh√°c trong qu√° kh·ª©.
D·∫•u hi·ªáu: for, since, before... 
V√≠ d·ª•: He had been waiting for 2 hours before she came. 
III. Nh√≥m th√¨ T∆∞∆°ng Lai (Future Tenses)
9. Th√¨ T∆∞∆°ng lai ƒë∆°n (Future Simple) 
C√¥ng th·ª©c: S + will + (not) + V 
C√°ch d√πng: Quy·∫øt ƒë·ªãnh ngay l√∫c n√≥i, l·ªùi h·ª©a, d·ª± ƒëo√°n kh√¥ng c√≥ cƒÉn c·ª©.
D·∫•u hi·ªáu: tomorrow, next week, soon... 
V√≠ d·ª•: I will call you tomorrow. 
10. Th√¨ T∆∞∆°ng lai g·∫ßn (Near Future - Be going to) 
C√¥ng th·ª©c: S + am/is/are + (not) + going to + V 
C√°ch d√πng: K·∫ø ho·∫°ch c√≥ d·ª± ƒë·ªãnh t·ª´ tr∆∞·ªõc ho·∫∑c d·ª± ƒëo√°n c√≥ cƒÉn c·ª©.
D·∫•u hi·ªáu: plan, intend, look at...! 
V√≠ d·ª•: Look at the clouds! It is going to rain. 
11. Th√¨ T∆∞∆°ng lai ti·∫øp di·ªÖn (Future Continuous) 
C√¥ng th·ª©c: S + will + (not) + be + V-ing 
C√°ch d√πng: H√†nh ƒë·ªông s·∫Ω ƒëang x·∫£y ra t·∫°i m·ªôt th·ªùi ƒëi·ªÉm c·ª• th·ªÉ trong t∆∞∆°ng lai.
D·∫•u hi·ªáu: at this time tomorrow, at 10 a.m next Monday... 
V√≠ d·ª•: At 8 p.m tonight, I will be watching a movie. 
12. Th√¨ T∆∞∆°ng lai ho√†n th√†nh (Future Perfect) 
C√¥ng th·ª©c: S + will + (not) + have + V3/ed 
C√°ch d√πng: H√†nh ƒë·ªông s·∫Ω ho√†n th√†nh tr∆∞·ªõc m·ªôt th·ªùi ƒëi·ªÉm/h√†nh ƒë·ªông kh√°c trong t∆∞∆°ng lai.
D·∫•u hi·ªáu: by, by the time, by the end of... 
V√≠ d·ª•: By next year, I will have graduated from university. 
13. Th√¨ T∆∞∆°ng lai ho√†n th√†nh ti·∫øp di·ªÖn (Future Perfect Continuous) 
C√¥ng th·ª©c: S + will + (not) + have + been + V-ing 
C√°ch d√πng: Nh·∫•n m·∫°nh h√†nh ƒë·ªông s·∫Ω k√©o d√†i li√™n t·ª•c ƒë·∫øn m·ªôt th·ªùi ƒëi·ªÉm trong t∆∞∆°ng lai.
D·∫•u hi·ªáu: by... for, by the time... 
V√≠ d·ª•: By March, we will have been living here for 5 years. 
L∆∞u √Ω quan tr·ªçng v·ªÅ k√Ω hi·ªáu:
V: ƒê·ªông t·ª´ nguy√™n th·ªÉ 
V-s/es: ƒê·ªông t·ª´ chia ng√¥i th·ª© 3 s·ªë √≠t (hi·ªán t·∫°i ƒë∆°n) 
V2/ed: Qu√° kh·ª© ƒë∆°n (c·ªôt 2 ho·∫∑c th√™m -ed) 
V3/ed: Qu√° kh·ª© ph√¢n t·ª´ (c·ªôt 3 ho·∫∑c th√™m -ed) 
V-ing: ƒê·ªông t·ª´ th√™m ƒëu√¥i -ing;

        async function sendMessage() {
            const inputField = document.getElementById('user-input');
            const sendBtn = document.getElementById('btn-send');
            const chatBox = document.getElementById('chat-box');
            const userText = inputField.value.trim();

            if (!userText) return;

            chatBox.innerHTML += `<div class="message user-msg">${userText}</div>`;
            inputField.value = "";
            chatBox.scrollTop = chatBox.scrollHeight;

            sendBtn.disabled = true;
            sendBtn.innerText = "...";
            
            const loadingId = "msg-" + Date.now();
            chatBox.innerHTML += `<div id="${loadingId}" class="message ai-msg">Thinking...</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;

            try {
                // T√äN MODEL CHU·∫®N X√ÅC: gemini-flash-latest
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${API_KEY}`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: TRAINING_DATA + ". Ng∆∞·ªùi d√πng h·ªèi: " + userText }] }]
                    })
                });

                const data = await response.json();

                if (data.error) {
                    let err = "L·ªói k·∫øt n·ªëi!";
                    if (data.error.message.includes("API key")) err = "Key b·ªã l·ªói r·ªìi S∆°n ∆°i!";
                    document.getElementById(loadingId).innerText = "‚ùå " + err + " (" + data.error.message + ")";
                    document.getElementById(loadingId).style.color = "#ff5555";
                } else {
                    const aiReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Em ch∆∞a hi·ªÉu √Ω ƒê·∫°i Ca...";
                    document.getElementById(loadingId).innerText = aiReply;
                }
            } catch (error) {
                document.getElementById(loadingId).innerText = "‚ùå L·ªói m·∫°ng: " + error.message;
            }
            sendBtn.disabled = false;
            sendBtn.innerText = "G·ª≠i";
        }
    </script>
</body>
</html>
